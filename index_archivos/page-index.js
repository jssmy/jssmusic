webpackJsonp(["page-index"],{"./js/Page/components/Page.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_config=__webpack_require__("./js/_modules/config/index.js"),_config2=_interopRequireDefault(_config),_api=__webpack_require__("./js/_modules/api.js"),_api2=_interopRequireDefault(_api),_Events=__webpack_require__("./js/_modules/Events.js"),_Events2=_interopRequireDefault(_Events),_Section=__webpack_require__("./js/Page/components/Section.js"),_Section2=_interopRequireDefault(_Section),_Highlight=__webpack_require__("./js/Page/components/layouts/Highlight.js"),_Highlight2=_interopRequireDefault(_Highlight),_DeeplinkList=__webpack_require__("./js/Page/components/layouts/DeeplinkList.js"),_DeeplinkList2=_interopRequireDefault(_DeeplinkList),_List=__webpack_require__("./js/Page/components/layouts/List.js"),_List2=_interopRequireDefault(_List),_LargeCard=__webpack_require__("./js/Page/components/layouts/LargeCard.js"),_LargeCard2=_interopRequireDefault(_LargeCard),_HorizontalGrid=__webpack_require__("./js/Page/components/layouts/HorizontalGrid.js"),_HorizontalGrid2=_interopRequireDefault(_HorizontalGrid),_ItemHighlight=__webpack_require__("./js/Page/components/layouts/ItemHighlight.js"),_ItemHighlight2=_interopRequireDefault(_ItemHighlight),_ThumbnailGrid=__webpack_require__("./js/_components/ThumbnailGrid/index.js"),_ThumbnailGrid2=_interopRequireDefault(_ThumbnailGrid),_utils=__webpack_require__("./js/_components/Thumbnail/utils.js"),_utils2=_interopRequireDefault(_utils),Page=function(_Component){function Page(props){_classCallCheck(this,Page);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this._onShowAdsSectionCallback=_this._onShowAdsSectionCallback.bind(_this),_this.state={sections:props.sections,masthead:props.masthead,title:props.title,handleAds:!1},_this}return _inherits(Page,_Component),Page.prototype.componentDidMount=function(){_Events2.default.ready(_Events2.default.ads.showAdsSection,this._onShowAdsSectionCallback),this.state.sections.length||this._getData(this.props.type)},Page.prototype.componentWillReceiveProps=function(nextProps){this.props.type!==nextProps.type&&(this.setState({sections:nextProps.sections,masthead:nextProps.masthead,title:nextProps.title}),this._getData(nextProps.type))},Page.prototype.componentWillUnmount=function(){_api2.default.cancel(this._apiCallRef),_Events2.default.unresolve(_Events2.default.ads.showAdsSection)},Page.prototype.render=function(){var _this2=this,previousGroupId=null,hasWhiteBg=!0;return _react2.default.createElement("div",{className:"channel"},this.state.masthead?this._renderMasthead():this._renderTitle(),this.state.sections.map(function(section,index){return previousGroupId===section.group_id||"ads"===section.layout&&!_this2.state.handleAds||(hasWhiteBg=!hasWhiteBg),previousGroupId=section.group_id,_react2.default.createElement(_Section2.default,_extends({key:index,hasWhiteBg:hasWhiteBg},section,{page_type:_this2.props.type}))}))},Page.prototype._renderTitle=function(){return this.state.title?_react2.default.createElement("div",{className:"container channel-main-headings"},_react2.default.createElement("h1",{className:"heading-1"},this.state.title)):null},Page.prototype._renderMasthead=function(){var masthead=this.state.masthead;if(!masthead)return null;var logoHeight=104,backgroundImage="",logoImage="";if("undefined"!=typeof masthead.background_image){var bgFolder=masthead.background_image.type,bgMd5=masthead.background_image.md5,bgExtension="200x1200.png",domain=_config2.default.get("SETTING_DOMAIN_IMG");backgroundImage="url("+domain+"/"+bgFolder+"/"+bgMd5+"/"+bgExtension+")"}if("undefined"!=typeof masthead.logo_image){var logoFolder=masthead.logo_image.type,logoMd5=masthead.logo_image.md5;logoImage=_utils2.default.getImageSrc(logoFolder,logoMd5,0,2*logoHeight,"none",100)}var mastheadAttr={title:masthead.title||"",color:masthead.background_color||"",backgroundImage:backgroundImage,logo:logoImage},mastheadStyles={backgroundColor:mastheadAttr.color,backgroundImage:mastheadAttr.backgroundImage,backgroundPosition:"center",backgroundSize:"cover"};return _react2.default.createElement("div",{className:"masthead",style:mastheadStyles},""!==mastheadAttr.logo?_react2.default.createElement("div",{className:"masthead-logo"},_react2.default.createElement("img",{src:mastheadAttr.logo,height:logoHeight,alt:""})):_react2.default.createElement("h1",{className:"masthead-title"},mastheadAttr.title))},Page.prototype._onShowAdsSectionCallback=function(){this.setState({handleAds:!0})},Page.prototype._getData=function(type){var _this3=this;this._apiCallRef=_api2.default.call({http_method:"GET",method:"page.get",data:{PAGE:type,VERSION:"2.1",SUPPORT:{highlight:_Highlight2.default.SUPPORTED_TYPES,"deeplink-list":_DeeplinkList2.default.SUPPORTED_TYPES,list:_List2.default.SUPPORTED_TYPES,grid:_ThumbnailGrid2.default.SUPPORTED_TYPES,"grid-preview-one":_ThumbnailGrid2.default.SUPPORTED_TYPES,"grid-preview-two":_ThumbnailGrid2.default.SUPPORTED_TYPES,"horizontal-grid":_HorizontalGrid2.default.SUPPORTED_TYPES,"item-highlight":_ItemHighlight2.default.SUPPORTED_TYPES,"large-card":_LargeCard2.default.SUPPORTED_TYPES,ads:["native"]},OPTIONS:["deeplink_newsandentertainment","deeplink_subscribeoffer"]},success:function(result){_this3.setState({sections:result.sections||[],masthead:result.masthead||null,title:/page_id=(channels\/)?home/.test(result.page_id)?null:result.title})}})},Page}(_react.Component);Page.defaultProps={sections:[],masthead:null},exports.default=Page},"./js/Page/components/Section.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("./node_modules/classnames/index.js"),_classnames2=_interopRequireDefault(_classnames),_Link=__webpack_require__("./js/_components/Link.js"),_Link2=_interopRequireDefault(_Link),_Highlight=__webpack_require__("./js/Page/components/layouts/Highlight.js"),_Highlight2=_interopRequireDefault(_Highlight),_DeeplinkList=__webpack_require__("./js/Page/components/layouts/DeeplinkList.js"),_DeeplinkList2=_interopRequireDefault(_DeeplinkList),_List=__webpack_require__("./js/Page/components/layouts/List.js"),_List2=_interopRequireDefault(_List),_HorizontalGrid=__webpack_require__("./js/Page/components/layouts/HorizontalGrid.js"),_HorizontalGrid2=_interopRequireDefault(_HorizontalGrid),_NativeAds=__webpack_require__("./js/Page/components/layouts/NativeAds.js"),_NativeAds2=_interopRequireDefault(_NativeAds),_Grid=__webpack_require__("./js/Page/components/layouts/Grid.js"),_Grid2=_interopRequireDefault(_Grid),_ItemHighlight=__webpack_require__("./js/Page/components/layouts/ItemHighlight.js"),_ItemHighlight2=_interopRequireDefault(_ItemHighlight),_LargeCard=__webpack_require__("./js/Page/components/layouts/LargeCard.js"),_LargeCard2=_interopRequireDefault(_LargeCard),_Type=__webpack_require__("./js/_modules/Type.js"),_Type2=_interopRequireDefault(_Type),_live=__webpack_require__("./js/_modules/live/live.js"),_live2=_interopRequireDefault(_live),_Events=__webpack_require__("./js/_modules/Events.js"),_Events2=_interopRequireDefault(_Events),Section=function(_Component){function Section(props){_classCallCheck(this,Section);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this._hideAdsSection=_this._hideAdsSection.bind(_this),_this._showAdsSection=_this._showAdsSection.bind(_this),_this._onAdsRefresh=_this._onAdsRefresh.bind(_this),_this.state={displayStyle:"none"},_this}return _inherits(Section,_Component),Section.prototype.getChildContext=function(){return{layout:this.props.layout}},Section.prototype.componentDidMount=function(){this._logDisplay(),"ads"===this.props.layout&&(_Events2.default.ready(_Events2.default.ads.showAdsSection,this._showAdsSection),_Events2.default.ready(_Events2.default.ads.hideAdsSection,this._hideAdsSection),_Events2.default.subscribe(_Events2.default.ads.refreshAds,this._onAdsRefresh))},Section.prototype.componentWillUnmount=function(){_Events2.default.unresolve(_Events2.default.ads.showAdsSection),_Events2.default.unresolve(_Events2.default.ads.hideAdsSection),_Events2.default.unsubscribe(_Events2.default.ads.refreshAds,this._onAdsRefresh)},Section.prototype.render=function(){var _props=this.props,layout=_props.layout,hasWhiteBg=_props.hasWhiteBg,Layout=this._getLayout(layout),layoutProps=this._getLayoutProps(),styleProps={};return"ads"===layout&&(styleProps.display=this.state.displayStyle),hasWhiteBg&&(styleProps.backgroundColor="#FFFFFF"),_react2.default.createElement("section",{className:"channel-section",style:styleProps},this._renderTitle(),_react2.default.createElement(Layout,_extends({},layoutProps,this.props)))},Section.prototype._renderTitle=function(){var _props2=this.props,title=_props2.title,related=_props2.related,target=_props2.target,alignment=_props2.alignment,layout=_props2.layout;if("undefined"==typeof title||"horizontal-grid"===layout)return null;var toTarget="undefined"!=typeof related?related.target:target,adsProps="ads"===layout?{id:"adSectionTitle"}:{},headingClasses=(0,_classnames2.default)({"channel-headings":!0,"is-centered":"center"===alignment}),linkAttributes={className:"link-animated",to:toTarget};return this._isExternalLinkTarget(toTarget)&&(linkAttributes.target="blank"),_react2.default.createElement("div",_extends({className:"container"},adsProps),_react2.default.createElement("div",{className:headingClasses},_react2.default.createElement("h2",{className:"heading-2"},"undefined"!=typeof toTarget?_react2.default.createElement(_Link2.default,linkAttributes,title):title),this._renderSubTitle()))},Section.prototype._renderSubTitle=function(){var _props3=this.props,subtitle=_props3.subtitle,layout=_props3.layout;return"undefined"==typeof subtitle||"horizontal-grid"===layout?null:_react2.default.createElement("h3",{className:"heading-2-sub"},subtitle)},Section.prototype._onAdsRefresh=function(){_Events2.default.resolve(_Events2.default.ads.hideAdsSection),_Events2.default.unresolve(_Events2.default.ads.hideAdsSection,this._hideAdsSection),_Events2.default.unresolve(_Events2.default.ads.showAdsSection,this._showAdsSection),_Events2.default.ready(_Events2.default.ads.hideAdsSection,this._hideAdsSection),_Events2.default.ready(_Events2.default.ads.showAdsSection,this._showAdsSection)},Section.prototype._getLayout=function(id){var layouts={highlight:_Highlight2.default,"deeplink-list":_DeeplinkList2.default,ads:_NativeAds2.default,list:_List2.default,grid:_Grid2.default,"grid-preview-one":_Grid2.default,"grid-preview-two":_Grid2.default,"horizontal-grid":_HorizontalGrid2.default,"item-highlight":_ItemHighlight2.default,"large-card":_LargeCard2.default};if("undefined"==typeof layouts[id])throw new Error('Layout "'+id+'" cannot be found');return layouts[id]},Section.prototype._getLayoutProps=function(){var _props4=this.props,items=_props4.items,title=_props4.title,subtitle=_props4.subtitle,alignment=_props4.alignment,related=_props4.related,target=_props4.target;if(!items.length)return null;var item=items[0],props={data:items.map(function(elt){var data=elt.data;return null===data?{}:("undefined"!=typeof elt.accessory_type&&(data.accessory_type=elt.accessory_type),"undefined"!=typeof elt.target&&(data.target=elt.target),data.context={ID:parseInt(elt.id,10),TYPE:"dynamic_page_"+elt.type+(elt.type===_Type2.default.Artist||elt.type===_Type2.default.User?"_radio":""),CONTEXT_ID:elt.item_id},data)}),id:item.id,options:this._getLayoutOptions(),type:item.type,tracking_type:"dynamic_page_click",title:title,subtitle:subtitle,alignment:alignment,related:related,target:target};return props},Section.prototype._getLayoutOptions=function(){var item=this.props.items[0],optionsList=[];switch("undefined"!=typeof item.title&&optionsList.push("name"),item.type){case _Type2.default.Album:"undefined"!=typeof item.subtitle&&optionsList.push("artist"),"undefined"!=typeof item.caption&&optionsList.push("release_date");break;case _Type2.default.Artist:"undefined"!=typeof item.subtitle&&optionsList.push("fans");break;case _Type2.default.Playlist:"undefined"!=typeof item.subtitle&&(optionsList.push("fans"),optionsList.push("tracks"));break;case _Type2.default.Radio:"undefined"!=typeof item.tags&&optionsList.push("tags")}return optionsList},Section.prototype._logDisplay=function(){_live2.default.log.send("navigation",{event:"onDisplay",properties:{section:this.props.section_id}})},Section.prototype._showAdsSection=function(){this.setState({displayStyle:"inline"})},Section.prototype._hideAdsSection=function(){this.setState({displayStyle:"none"})},Section.prototype._isExternalLinkTarget=function(target){return!(!target||!target.includes("http"))},Section}(_react.Component);Section.contextTypes={router:_react.PropTypes.object},Section.childContextTypes={layout:_react.PropTypes.string},Section.defaultProps={alignment:"center",hasWhiteBg:!1},exports.default=Section},"./js/Page/components/banner/GenericBanner.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_dzPlayer=__webpack_require__("./js/_modules/dzPlayer.js"),_dzPlayer2=_interopRequireDefault(_dzPlayer),_ref=_react2.default.createElement("span",null,_react2.default.createElement("span",{className:"media-overlay"}),_react2.default.createElement("span",{className:"media-play-music"},_react2.default.createElement("span",{className:"icon-52 icon-stack icon-stack-circle icon-stack-hover"},_react2.default.createElement("span",{className:"icon icon-play"})))),_ref2=_react2.default.createElement("span",null,_react2.default.createElement("span",{className:"media-overlay"}),_react2.default.createElement("span",{className:"media-play-video"},_react2.default.createElement("span",{className:"icon icon-play-video"}))),GenericBanner=function(_Component){function GenericBanner(props){_classCallCheck(this,GenericBanner);var _this=_possibleConstructorReturn(this,_Component.call(this,props));_this._click=_this._click.bind(_this);var conf=_this._getLinkConfig();return _this.state={href:conf.href,target:conf.target,shape:conf.shape,pixel:null},_this}return _inherits(GenericBanner,_Component),GenericBanner.prototype.render=function(){var adConfig=this.props.adConfig,_state=this.state,href=_state.href,target=_state.target,shape=_state.shape,pixel=_state.pixel;return _react2.default.createElement("a",{className:"channel-ads-banner channel-ads-generic",href:href,target:target,onClick:this._click},_react2.default.createElement("div",{className:"channel-ads-media"},_react2.default.createElement("img",{src:adConfig.image,height:"110",width:"260"}),this._getImageOverlay()),_react2.default.createElement("div",{className:"channel-ads-action"},_react2.default.createElement("span",{className:shape}),_react2.default.createElement("img",{className:"ads-pixel",src:pixel})),_react2.default.createElement("div",{className:"channel-ads-content"},_react2.default.createElement("div",{className:"heading-2 ellipsis"},adConfig.title),_react2.default.createElement("div",{className:"heading-3 ellipsis"},adConfig.description),_react2.default.createElement("div",{className:"heading-3 ellipsis"},adConfig.claimOption),_react2.default.createElement("span",{className:"channel-ads-label"},adConfig.advertising_type)))},GenericBanner.prototype._getImageOverlay=function(){var icon=this.props.adConfig.iconOption;switch(icon){case"play_music":return _ref;case"play_video":return _ref2;default:return null}},GenericBanner.prototype._isDeeplink=function(){return"1"===this.props.adConfig.isDeeplink},GenericBanner.prototype._checkAutoPlay=function(){var _props=this.props,params=_props.params,type=_props.type,id=_props.id;"undefined"!=typeof params&&params.indexOf("autoplay")>-1&&_dzPlayer2.default.play({type:type,id:id})},GenericBanner.prototype._getLinkConfig=function(){var _props2=this.props,adConfig=_props2.adConfig,type=_props2.type,id=_props2.id,linkConfig={target:"_blank",href:adConfig.urlTargetCountgo,shape:"ads-link icon icon-link-external"};return this._isDeeplink()?(linkConfig.href=type+"/"+id,linkConfig.shape="ads-link icon icon-arrow-right",linkConfig):linkConfig},GenericBanner.prototype._click=function(e){this._isDeeplink()&&(e.preventDefault(),this.setState({pixel:this.props.adConfig.urlTargetClickPixel}),this.context.router.push(this.state.href),this._checkAutoPlay())},GenericBanner}(_react.Component);GenericBanner.contextTypes={router:_react.PropTypes.object},exports.default=GenericBanner},"./js/Page/components/banner/ProductBanner.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_Link=__webpack_require__("./js/_components/Link.js"),_Link2=_interopRequireDefault(_Link),_Events=__webpack_require__("./js/_modules/Events.js"),_Events2=_interopRequireDefault(_Events),_dzPlayer=__webpack_require__("./js/_modules/dzPlayer.js"),_dzPlayer2=_interopRequireDefault(_dzPlayer),_userData=__webpack_require__("./js/_modules/userData.js"),_userData2=_interopRequireDefault(_userData),_Thumbnail=__webpack_require__("./js/_components/Thumbnail/index.js"),_Thumbnail2=_interopRequireDefault(_Thumbnail),_StatesButton=__webpack_require__("./js/_components/StatesButton/index.js"),_StatesButton2=_interopRequireDefault(_StatesButton),ProductBanner=function(_Component){function ProductBanner(props){_classCallCheck(this,ProductBanner);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this._callTrackingPixel=_this._callTrackingPixel.bind(_this),_this._onLinkClick=_this._onLinkClick.bind(_this),_this.state={adsTracking:"#",callToAction:_this._getStateButton()},_this}return _inherits(ProductBanner,_Component),ProductBanner.prototype.getChildContext=function(){return{id:this.props.id,name:this.props.context}},ProductBanner.prototype.componentDidMount=function(){var adConfig=this.props.adConfig;"1"===adConfig.interaction_add_favorite_enabled&&_Events2.default.subscribe(_Events2.default.ads.addToFavorite,this._callTrackingPixel),"1"===adConfig.interaction_play_enabled&&_Events2.default.subscribe(_Events2.default.ads.playMusic,this._callTrackingPixel),"1"===adConfig.interaction_queuelist_enabled&&_Events2.default.subscribe(_Events2.default.ads.addToQueueList,this._callTrackingPixel),"1"===adConfig.interaction_share_enabled&&_Events2.default.subscribe(_Events2.default.ads.share,this._callTrackingPixel)},ProductBanner.prototype.componentWillUnmount=function(){_Events2.default.unsubscribe(_Events2.default.ads.addToFavorite,this._callTrackingPixel),_Events2.default.unsubscribe(_Events2.default.ads.playMusic,this._callTrackingPixel),_Events2.default.unsubscribe(_Events2.default.ads.addToQueueList,this._callTrackingPixel),_Events2.default.unsubscribe(_Events2.default.ads.share,this._callTrackingPixel)},ProductBanner.prototype.render=function(){var _props=this.props,type=_props.type,id=_props.id,params=_props.params,apiData=_props.apiData,context=_props.context,adConfig=_props.adConfig,deeplink=type+"/"+id;return params&&(deeplink=deeplink+"?"+params),_react2.default.createElement("div",{className:"channel-ads-banner"},_react2.default.createElement("div",{className:"channel-ads-media"},_react2.default.createElement(_Thumbnail2.default,{type:type,data:apiData,context:context,width:260,height:110,play:"on",preview:"off",showOptions:!0,imgSrc:adConfig.image})),_react2.default.createElement("div",{className:"channel-ads-action"},this.state.callToAction,_react2.default.createElement("img",{className:"ads-pixel",src:this.state.adsTracking})),_react2.default.createElement("div",{className:"channel-ads-content"},_react2.default.createElement("div",{className:"heading-2 ellipsis"},_react2.default.createElement(_Link2.default,{to:deeplink,onClick:this._onLinkClick},adConfig.title)),_react2.default.createElement("div",{className:"heading-3 ellipsis"},_react2.default.createElement(_Link2.default,{to:deeplink,onClick:this._onLinkClick},adConfig.description)),_react2.default.createElement("span",{className:"channel-ads-label"},adConfig.advertising_type),_react2.default.createElement("span",{className:"channel-ads-tags"},adConfig.hashtagOption)))},ProductBanner.prototype._onLinkClick=function(){this._callLinkAdsTracking(),this._checkAutoPlay()},ProductBanner.prototype._callTrackingPixel=function(e,param){var adConfig=this.props.adConfig;"1"===adConfig[param+"_enabled"]&&this.setState({adsTracking:adConfig[param]})},ProductBanner.prototype._callLinkAdsTracking=function(){this.setState({adsTracking:this.props.adConfig.urlTargetClickPixel})},ProductBanner.prototype._checkAutoPlay=function(){var _props2=this.props,params=_props2.params,type=_props2.type,id=_props2.id;"undefined"!=typeof params&&params.indexOf("autoplay")>-1&&_dzPlayer2.default.play({type:type,id:id})},ProductBanner.prototype._getStateButton=function(){var _props3=this.props,id=_props3.id,type=_props3.type,context=_props3.context,stateBtnProps={id:Number(id),type:type};return _userData2.default.isFavorite(type,id)&&(stateBtnProps.type=type,stateBtnProps.action="play",stateBtnProps.play_context=context,stateBtnProps.wording_type="full"),_react2.default.createElement(_StatesButton2.default,stateBtnProps)},ProductBanner}(_react.Component);ProductBanner.contextTypes={router:_react.PropTypes.object},ProductBanner.childContextTypes={id:_react.PropTypes.number,name:_react.PropTypes.string},exports.default=ProductBanner},"./js/Page/components/items/CrossFader.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("./node_modules/classnames/index.js"),_classnames2=_interopRequireDefault(_classnames),_utils=__webpack_require__("./js/_components/Thumbnail/utils.js"),_utils2=_interopRequireDefault(_utils),_Thumbnail=__webpack_require__("./js/_components/Thumbnail/index.js"),_Thumbnail2=_interopRequireDefault(_Thumbnail),CrossFader=function(_Component){function CrossFader(props){_classCallCheck(this,CrossFader);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this._loopInterval=0,_this._setLoopPictures=_this._setLoopPictures.bind(_this),_this._onClick=_this._onClick.bind(_this),_this.state={currentIndex:props.picturesIndex},_this}return _inherits(CrossFader,_Component),CrossFader.prototype.componentDidMount=function(){return!this.props.pictures.length||this.context.flowPlaying?void this._clearLoopInterval():void this._setLoopInterval()},CrossFader.prototype.componentWillReceiveProps=function(nextProps,nextContext){nextProps.pictures.length&&!nextContext.flowPlaying||this._clearLoopInterval(),this.setState({currentIndex:nextProps.picturesIndex})},CrossFader.prototype.componentWillUnmount=function(){this._clearLoopInterval()},CrossFader.prototype.render=function(){var _this2=this;if(!this.props.pictures.length)return null;var covers=this.props.pictures.map(function(picture,index){var classes=(0,_classnames2.default)({cover:!0,active:_this2.state.currentIndex===index}),imgSrc=_utils2.default.getImageSrc(picture.type,picture.md5,264,264);return _react2.default.createElement("div",{key:picture.md5+"_"+index,className:classes},_react2.default.createElement(_Thumbnail2.default,{imgSrc:imgSrc,imgHeight:_this2.props.height,imgWidth:_this2.props.width,height:162,width:162,blur:_this2.props.blur,coverLink:_this2.props.coverLink,type:"track"}))}),containerClasses=(0,_classnames2.default)({"cover-crossfader":!0,"has-overlay":this.props.coverLink});return _react2.default.createElement("div",{className:containerClasses,onClick:this._onClick},covers)},CrossFader.prototype._onClick=function(){this.props.onClick&&this.props.onClick()},CrossFader.prototype._setLoopInterval=function(){this.props.pictures.length&&(this._clearLoopInterval(),this._loopInterval=setInterval(this._setLoopPictures,4e3))},CrossFader.prototype._clearLoopInterval=function(){clearInterval(this._loopInterval)},CrossFader.prototype._setLoopPictures=function(){var loopIndex=(this.state.currentIndex+1)%this.props.pictures.length;this.setState({currentIndex:loopIndex})},CrossFader}(_react.Component);CrossFader.contextTypes={flowPlaying:_react.PropTypes.bool},CrossFader.defaultProps={blur:0,picturesIndex:0,coverLink:!1,height:void 0,width:void 0},exports.default=CrossFader},"./js/Page/components/items/DeeplinkList.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),
superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_Link=__webpack_require__("./js/_components/Link.js"),_Link2=_interopRequireDefault(_Link),_utils=__webpack_require__("./js/_components/Thumbnail/utils.js"),_utils2=_interopRequireDefault(_utils),DeeplinkListItem=function(_Component){function DeeplinkListItem(){return _classCallCheck(this,DeeplinkListItem),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(DeeplinkListItem,_Component),DeeplinkListItem.prototype.render=function(){var _props=this.props,pictures=_props.pictures,target=_props.target,title=_props.title,background_color=_props.background_color,linkStyles={backgroundColor:background_color||"#C2C2CA"};if(pictures&&pictures.length){var picture=pictures[0];linkStyles.backgroundImage="url("+_utils2.default.getImageSrc(picture.type,picture.md5,380,48,null,100)+")"}return _react2.default.createElement("div",{className:"channel-list-item"},_react2.default.createElement(_Link2.default,{className:"nano-card-link",to:target,onClick:this._onClick,style:linkStyles},_react2.default.createElement("div",{className:"heading-4 link-animated ellipsis"},title)))},DeeplinkListItem.prototype._onClick=function(e){/^\//.test(this.props.target)||(e.preventDefault(),window.location=this.props.target)},DeeplinkListItem}(_react.Component);exports.default=DeeplinkListItem},"./js/Page/components/items/Flow/Background.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_dzPlayer=__webpack_require__("./js/_modules/dzPlayer.js"),_dzPlayer2=_interopRequireDefault(_dzPlayer),_Events=__webpack_require__("./js/_modules/Events.js"),_Events2=_interopRequireDefault(_Events),_CrossFader=__webpack_require__("./js/Page/components/items/CrossFader.js"),_CrossFader2=_interopRequireDefault(_CrossFader),Background=function(_Component){function Background(props){_classCallCheck(this,Background);var _this=_possibleConstructorReturn(this,_Component.call(this,props));_this._preloadedPictures=[],_this._setPlayerBackground=_this._setPlayerBackground.bind(_this),_this._setBackgroundTransition=_this._setBackgroundTransition.bind(_this),_this._setBackgroundTransitionCallback=_this._setBackgroundTransitionCallback.bind(_this),_this._getPreloadedPictures=_this._getPreloadedPictures.bind(_this);var flowPlaying=_dzPlayer2.default.helper.isPlayingUserFlow();return _this.state={picturesIndex:flowPlaying?props.pictures.length:0,playerLaunched:flowPlaying,preloadedPictures:_this._getPreloadedPictures(props)},_this}return _inherits(Background,_Component),Background.prototype.getChildContext=function(){return{flowPlaying:_dzPlayer2.default.helper.isPlayingUserFlow()}},Background.prototype.componentDidMount=function(){_Events2.default.subscribe(_Events2.default.player.play,this._setPlayerBackground)},Background.prototype.componentWillReceiveProps=function(nextProps){this.setState({preloadedPictures:this._getPreloadedPictures(nextProps)})},Background.prototype.componentWillUnmount=function(){clearTimeout(this._backgroundTransitionTimeout),_Events2.default.unsubscribe(_Events2.default.player.play,this._setPlayerBackground)},Background.prototype.render=function(){return _react2.default.createElement(_CrossFader2.default,{pictures:this.state.preloadedPictures,picturesIndex:this.state.picturesIndex,height:280,width:1464,blur:5})},Background.prototype._setPlayerBackground=function(){var flowPlaying=_dzPlayer2.default.helper.isPlayingUserFlow(),_state=this.state,playerLaunched=_state.playerLaunched,preloadedPictures=_state.preloadedPictures,picturesIndex=_state.picturesIndex,pictures=this.props.pictures;if(playerLaunched||flowPlaying){if(!playerLaunched&&flowPlaying)return void this._setBackgroundTransition();if(playerLaunched&&!flowPlaying)return void this._setBackgroundTransition();var currentSong=_dzPlayer2.default.getCurrentSong(),nextSong=_dzPlayer2.default.getNextSong()||{},currentIndex=picturesIndex>=preloadedPictures.length-1?pictures.length:picturesIndex+1,nextIndex=currentIndex>=preloadedPictures.length-1?pictures.length:currentIndex+1;if(this._preloadedPictures[currentIndex]&&currentSong.SNG_ID===this._preloadedPictures[currentIndex].SNG_ID||(this._preloadedPictures[currentIndex]={md5:currentSong.ALB_PICTURE,type:"cover"}),this._preloadedPictures[nextIndex]&&nextSong.SNG_ID!==this._preloadedPictures[nextIndex].SNG_ID){var sponsoredData=_dzPlayer2.default.getSponsoredData(nextSong);this._preloadedPictures[nextIndex]={md5:nextSong.ALB_PICTURE,type:"cover",url:sponsoredData&&sponsoredData.ARTWORK_URL?sponsoredData.ARTWORK_URL:null}}this.setState({picturesIndex:currentIndex,preloadedPictures:this._preloadedPictures,playerLaunched:!0})}},Background.prototype._setBackgroundTransition=function(){var flowPlaying=_dzPlayer2.default.helper.isPlayingUserFlow();this.setState({playerLaunched:flowPlaying,preloadedPictures:flowPlaying?this._getPreloadedPictures(this.props):this.state.preloadedPictures},this._setBackgroundTransitionCallback)},Background.prototype._setBackgroundTransitionCallback=function(){var _this2=this,flowPlaying=_dzPlayer2.default.helper.isPlayingUserFlow();this._backgroundTransitionTimeout=setTimeout(function(){_this2.setState({picturesIndex:flowPlaying?_this2.props.pictures.length:0})},400)},Background.prototype._getPreloadedPictures=function(props){var preloadedPictures=props.pictures.slice();return _dzPlayer2.default.helper.isPlayingUserFlow()&&(_dzPlayer2.default.getCurrentSong()&&preloadedPictures.push({md5:_dzPlayer2.default.getCurrentSong().ALB_PICTURE,type:"cover"}),_dzPlayer2.default.getNextSong()&&preloadedPictures.push({md5:_dzPlayer2.default.getNextSong().ALB_PICTURE,type:"cover"}),preloadedPictures.push({md5:"d41d8cd98f00b204e9800998ecf8427e",type:"cover"})),this._preloadedPictures=preloadedPictures,this._preloadedPictures},Background}(_react.Component);Background.childContextTypes={flowPlaying:_react.PropTypes.bool},exports.default=Background},"./js/Page/components/items/Flow/Launcher.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_i18n=__webpack_require__("./js/_modules/i18n.js"),_dzPlayer=__webpack_require__("./js/_modules/dzPlayer.js"),_dzPlayer2=_interopRequireDefault(_dzPlayer),_tracking=__webpack_require__("./js/_modules/tracking.js"),_tracking2=_interopRequireDefault(_tracking),_PlayerMetrics=__webpack_require__("./js/_modules/player/PlayerMetrics.js"),_PlayerMetrics2=_interopRequireDefault(_PlayerMetrics),_CrossFader=__webpack_require__("./js/Page/components/items/CrossFader.js"),_CrossFader2=_interopRequireDefault(_CrossFader),_ref=_react2.default.createElement("span",{className:"logo logo-flow"}),_ref2=_react2.default.createElement("span",{className:"icon-52 icon-stack icon-stack-circle"},_react2.default.createElement("span",{className:"icon icon-play"})),Launcher=function(_Component){function Launcher(){_classCallCheck(this,Launcher);var _this=_possibleConstructorReturn(this,_Component.call(this));return _this._playerLaunched=!1,_this._onClickFlow=_this._onClickFlow.bind(_this),_this}return _inherits(Launcher,_Component),Launcher.prototype.render=function(){return _react2.default.createElement("div",{className:"flow-content"},_react2.default.createElement(_CrossFader2.default,{pictures:this.props.pictures,height:162,width:162}),_react2.default.createElement("div",{className:"flow-play-info"},_react2.default.createElement("h2",null,_ref,_react2.default.createElement("span",{className:"sr-only"},(0,_i18n.gettext)("FLOW"))),_react2.default.createElement("h3",{className:"heading-4 heading-inverse"},this.props.subtitle),_react2.default.createElement("button",{className:"flow-btn",type:"button","aria-label":(0,_i18n.gettext)("Lancer Flow"),onClick:this._onClickFlow},_ref2)))},Launcher.prototype._onClickFlow=function(){var _props=this.props,type=_props.type,target=_props.target,id=_props.id,context=_props.context;return"user"!==type&&"string"==typeof target?void this.context.router.push(target):void(this._playerLaunched!==!0&&(this._playerLaunched=!0,_PlayerMetrics2.default.intent("play"),_dzPlayer2.default.play({type:type,id:id,radio:!0,context:context}),_tracking2.default.track("flow_click",{type:type,instance:"dynamic_page"})))},Launcher}(_react.Component);Launcher.contextTypes={router:_react.PropTypes.object.isRequired},Launcher.defaultProps={context:""},exports.default=Launcher},"./js/Page/components/items/Flow/Player.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_Link=__webpack_require__("./js/_components/Link.js"),_Link2=_interopRequireDefault(_Link),_classnames=__webpack_require__("./node_modules/classnames/index.js"),_classnames2=_interopRequireDefault(_classnames),_i18n=__webpack_require__("./js/_modules/i18n.js"),_dzPlayer=__webpack_require__("./js/_modules/dzPlayer.js"),_dzPlayer2=_interopRequireDefault(_dzPlayer),_Events=__webpack_require__("./js/_modules/Events.js"),_Events2=_interopRequireDefault(_Events),_notification=__webpack_require__("./js/_modules/notification.js"),_displayNotification=__webpack_require__("./js/_modules/displayNotification.js"),_displayNotification2=_interopRequireDefault(_displayNotification),_config=__webpack_require__("./js/_modules/config/index.js"),_config2=_interopRequireDefault(_config),_PlayerMetrics=__webpack_require__("./js/_modules/player/PlayerMetrics.js"),_PlayerMetrics2=_interopRequireDefault(_PlayerMetrics),_storage=__webpack_require__("./js/_modules/storage.js"),_storage2=_interopRequireDefault(_storage),_Thumbnail=__webpack_require__("./js/_components/Thumbnail/index.js"),_Thumbnail2=_interopRequireDefault(_Thumbnail),_utils=__webpack_require__("./js/_components/Thumbnail/utils.js"),_utils2=_interopRequireDefault(_utils),_Favorite=__webpack_require__("./js/_components/Favorite.js"),_Favorite2=_interopRequireDefault(_Favorite),_Dislike=__webpack_require__("./js/_components/Dislike.js"),_Dislike2=_interopRequireDefault(_Dislike),_Tooltip=__webpack_require__("./js/_components/Tooltip/index.js"),_Tooltip2=_interopRequireDefault(_Tooltip),_ref=_react2.default.createElement("span",{className:"logo logo-flow-small"}),_ref2=_react2.default.createElement("span",{className:"icon icon-lyrics"}),Player=function(_Component){function Player(props){_classCallCheck(this,Player);var _this=_possibleConstructorReturn(this,_Component.call(this,props));_this._setPlayerState=_this._setPlayerState.bind(_this),_this._setPlayerTypeState=_this._setPlayerTypeState.bind(_this),_this._onDislikeClick=_this._onDislikeClick.bind(_this),_this._onFavoriteClick=_this._onFavoriteClick.bind(_this),_this._next=_this._next.bind(_this),_this._openLyrics=_this._openLyrics.bind(_this),_this._setAlreadyUsed=_this._setAlreadyUsed.bind(_this);var preloadedTrack=[];return _dzPlayer2.default.getCurrentSong()&&preloadedTrack.push(_dzPlayer2.default.getCurrentSong()),_dzPlayer2.default.getNextSong()&&preloadedTrack.push(_dzPlayer2.default.getNextSong()),_this.state={alreadyUsed:_this._getAlreadyUsed(props.alreadyUsed),pictures_index:0,player_type:"radio",radio_skip_blocked:!_dzPlayer2.default.skipRadioAllowed(),hasLyrics:_dzPlayer2.default.hasLyrics(),preloadedTrack:preloadedTrack},_this}return _inherits(Player,_Component),Player.prototype.componentDidMount=function(){_Events2.default.resolve(_Events2.default.flow.playerDisplay),_Events2.default.subscribe(_Events2.default.player.displayCurrentSong,this._setPlayerState,"header_flow"),_Events2.default.subscribe(_Events2.default.player.changePlayerType,this._setPlayerTypeState,"header_flow"),this._setAlreadyUsedTimeout=setTimeout(this._setAlreadyUsed,1e4)},Player.prototype.componentWillUpdate=function(nextProps,nextState){this.state.pictures_index!==nextState.pictures_index&&_Events2.default.trigger(_Events2.default.menu.contextMenuClose)},Player.prototype.componentWillUnmount=function(){clearTimeout(this._nextTrackTimeout),clearTimeout(this._setAlreadyUsedTimeout),_Events2.default.unsubscribe(_Events2.default.player.displayCurrentSong,this._setPlayerState),_Events2.default.unsubscribe(_Events2.default.player.changePlayerType,this._setPlayerTypeState)},Player.prototype.render=function(){var _this2=this,covers=[],titles=[],artists=[],_state=this.state,pictures_index=_state.pictures_index,preloadedTrack=_state.preloadedTrack;preloadedTrack.map(function(trackData,i){var active=pictures_index===i,keySuffix=trackData.SNG_ID+"_"+i,coverClasses=(0,_classnames2.default)({"flow-thumbnail":!0,active:active}),imgSrc=_utils2.default.getImageSrc("cover",trackData.ALB_PICTURE,180,180);covers.push(_react2.default.createElement("div",{className:coverClasses,key:"cover_"+keySuffix,onClick:_this2._togglePlay},_react2.default.createElement(_Thumbnail2.default,{id:_config2.default.get("USER.USER_ID"),type:"user",play:"forceCenter",alt:trackData.ART_NAME+" - "+trackData.ALB_TITLE,coverLink:!1,context:_this2.props.context,width:162,height:162,imgSrc:imgSrc,data:trackData,isSponsored:_dzPlayer2.default.helper.isSponsoredTrack(trackData)}))),titles.push(_react2.default.createElement("span",{className:"flow-play-track ellipsis"+(active?" active":""),key:"title_"+keySuffix},trackData.SNG_TITLE)),artists.push(_react2.default.createElement("span",{className:"flow-play-track ellipsis"+(active?" active":""),key:"artist_"+keySuffix},trackData.ART_NAME))});var preloadedData=preloadedTrack[pictures_index];return _react2.default.createElement("div",{className:"flow-content"},covers,this._renderAction(titles,artists,preloadedData))},Player.prototype._renderAction=function(titles,artists,preloadedData){var _state2=this.state,alreadyUsed=_state2.alreadyUsed,hasLyrics=_state2.hasLyrics,player_type=_state2.player_type;if(!alreadyUsed)return _react2.default.createElement("div",{className:"flow-play-info is-first-usage"},_react2.default.createElement("h2",{className:"heading-2 heading-inverse"},(0,_i18n.gettext)("Voici FLOW")),_react2.default.createElement("h4",{className:"heading-4 heading-inverse"},(0,_i18n.gettext)("Le must ? Il apprend à vous connaître et s'adapte à vos goûts.")),_react2.default.createElement("button",{type:"button",className:"btn flow-info-btn",onClick:this._setAlreadyUsed},_react2.default.createElement("span",{className:"label"},(0,_i18n.gettext)("J'ai compris !"))));var lyricsClasses=(0,_classnames2.default)({"flow-action":!0,invisible:!hasLyrics});return _react2.default.createElement("div",{className:"flow-play-info"},_ref,_react2.default.createElement(_Link2.default,{className:"heading-2 heading-inverse",to:"/album/"+preloadedData.ALB_ID},titles),_react2.default.createElement("p",{className:"heading-4 heading-inverse"},(0,_i18n.gettext)("par")," ",_react2.default.createElement(_Link2.default,{to:"/artist/"+preloadedData.ART_ID},artists)),_react2.default.createElement("ul",{className:"flow-action-list clearfix"},_react2.default.createElement("li",{className:"flow-action"},_react2.default.createElement(_Dislike2.default,{style:"heart_medium",tooltip:!0,elId:"flow-unlove",overlay:!1,id:preloadedData.SNG_ID,onClickCallback:this._onDislikeClick})),_react2.default.createElement("li",{className:"flow-action"},_react2.default.createElement(_Favorite2.default,{type:"song",style:"heart_medium",overlay:!1,context:"flow_header",elId:"flow-love",tooltip:!0,id:preloadedData.SNG_ID,onClickCallback:this._onFavoriteClick})),_react2.default.createElement("li",{className:lyricsClasses},_react2.default.createElement("button",{className:"icon-44 icon-stack icon-stack-circle",type:"button","aria-label":(0,_i18n.gettext)("Afficher les paroles"),onClick:this._openLyrics},_react2.default.createElement(_Tooltip2.default,{text:(0,_i18n.gettext)("Afficher les paroles")},_ref2))),_react2.default.createElement("li",{className:"flow-action next"},_react2.default.createElement("button",{className:"icon icon-16 icon-next",type:"button",disabled:"ads"===player_type,"aria-label":(0,_i18n.gettext)("Lire le titre suivant"),onClick:this._next}))))},Player.prototype._onDislikeClick=function(){(0,_displayNotification2.default)("dislike"),this._nextTrackTimeout=setTimeout(this._next,300)},Player.prototype._onFavoriteClick=function(type,id,isFavorite){isFavorite&&(0,_displayNotification2.default)("like")},Player.prototype._togglePlay=function(){_Events2.default.trigger(_Events2.default.thumbnail.togglePlay)},Player.prototype._setPlayerTypeState=function(){this.setState({player_type:_dzPlayer2.default.getPlayerType()})},Player.prototype._setPlayerState=function(){if(_dzPlayer2.default.helper.isPlayingUserFlow()){var _state3=this.state,pictures_index=_state3.pictures_index,preloadedTrack=_state3.preloadedTrack,currentSong=_dzPlayer2.default.getCurrentSong(),nextSong=_dzPlayer2.default.getNextSong()||{},currentIndex=pictures_index>=2?0:pictures_index+1,nextIndex=currentIndex>=2?0:currentIndex+1;preloadedTrack[currentIndex]&&currentSong.SNG_ID===preloadedTrack[currentIndex].SNG_ID||(preloadedTrack[currentIndex]=currentSong),preloadedTrack[nextIndex]&&nextSong.SNG_ID!==preloadedTrack[nextIndex].SNG_ID&&(preloadedTrack[nextIndex]=nextSong),this.setState({player_type:_dzPlayer2.default.getPlayerType(),pictures_index:currentIndex,radio_skip_blocked:!_dzPlayer2.default.skipRadioAllowed(),hasLyrics:_dzPlayer2.default.hasLyrics(),preloadedTrack:preloadedTrack})}},Player.prototype._next=function(e){e&&e.stopPropagation&&e.stopPropagation(),this.state.radio_skip_blocked?_notification.notificationBar.display("flow_skip_push",{}):(_PlayerMetrics2.default.intent("next"),_dzPlayer2.default.control.nextSong())},Player.prototype._openLyrics=function(){_Events2.default.trigger(_Events2.default.menu.openLyricsPanel,{context:"player",toggle:!0})},Player.prototype._setAlreadyUsed=function(){_storage2.default.set("flow_already_used",!0),this.setState({alreadyUsed:!0})},Player.prototype._getAlreadyUsed=function(valueFromProps){if(valueFromProps===!1){var valueFromStorage=!!_storage2.default.isset("flow_already_used")&&_storage2.default.get("flow_already_used");if(valueFromStorage===!1)return!1}return!0},Player}(_react.Component);Player.defaultProps={context:""},exports.default=Player},"./js/Page/components/items/Flow/ProgressBar.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("./node_modules/classnames/index.js"),_classnames2=_interopRequireDefault(_classnames),_Events=__webpack_require__("./js/_modules/Events.js"),_Events2=_interopRequireDefault(_Events),_dzPlayer=__webpack_require__("./js/_modules/dzPlayer.js"),_dzPlayer2=_interopRequireDefault(_dzPlayer),_config=__webpack_require__("./js/_modules/config/index.js"),_config2=_interopRequireDefault(_config),ProgressBar=function(_Component){function ProgressBar(props){_classCallCheck(this,ProgressBar);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this._setPlayerPosition=_this._setPlayerPosition.bind(_this),_this._seek=_this._seek.bind(_this),_this.state={position:_this._calculatePosition(_dzPlayer2.default.getPosition())},_this}return _inherits(ProgressBar,_Component),ProgressBar.prototype.componentDidMount=function(){_Events2.default.subscribe(_Events2.default.player.position,this._setPlayerPosition)},ProgressBar.prototype.shouldComponentUpdate=function(nextProps,nextState){return nextState.position!==this.state.position},ProgressBar.prototype.componentWillUnmount=function(){_Events2.default.unsubscribe(_Events2.default.player.position,this._setPlayerPosition)},ProgressBar.prototype.render=function(){var classes=(0,_classnames2.default)({"flow-progress-bar":!0,seek:_config2.default.get("USER.OPTIONS").ads_display===!1}),styles={width:this.state.position+"%"};return _react2.default.createElement("div",{ref:"progressBar",role:"slider",className:classes,onClick:this._seek},_react2.default.createElement("div",{className:"flow-progress-bar-overlay",style:styles}))},ProgressBar.prototype._setPlayerPosition=function(e,position){this.setState({position:this._calculatePosition(position)})},ProgressBar.prototype._calculatePosition=function(position){return Math.round(1e4*position/_dzPlayer2.default.getCurrentSong("DURATION"))/100},ProgressBar.prototype._seek=function(e){if(!_dzPlayer2.default.control.canSeek())return void e.preventDefault();var progressBar=this.refs.progressBar,pos=(e.pageX-progressBar.getBoundingClientRect().left+document.body.scrollLeft)/progressBar.offsetWidth;_dzPlayer2.default.control.seek(pos)},ProgressBar}(_react.Component);exports.default=ProgressBar},"./js/Page/components/items/Flow/index.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("./node_modules/classnames/index.js"),_classnames2=_interopRequireDefault(_classnames),_ProgressBar=__webpack_require__("./js/Page/components/items/Flow/ProgressBar.js"),_ProgressBar2=_interopRequireDefault(_ProgressBar),_Launcher=__webpack_require__("./js/Page/components/items/Flow/Launcher.js"),_Launcher2=_interopRequireDefault(_Launcher),_Player=__webpack_require__("./js/Page/components/items/Flow/Player.js"),_Player2=_interopRequireDefault(_Player),_Background=__webpack_require__("./js/Page/components/items/Flow/Background.js"),_Background2=_interopRequireDefault(_Background),_Events=__webpack_require__("./js/_modules/Events.js"),_Events2=_interopRequireDefault(_Events),_dzPlayer=__webpack_require__("./js/_modules/dzPlayer.js"),_dzPlayer2=_interopRequireDefault(_dzPlayer),_i18n=__webpack_require__("./js/_modules/i18n.js"),_ref=_react2.default.createElement(_ProgressBar2.default,null),Flow=function(_Component){function Flow(){_classCallCheck(this,Flow);var _this=_possibleConstructorReturn(this,_Component.call(this));return _this._switchTimeout=null,_this._onTrackListChanged=_this._onTrackListChanged.bind(_this),_this._checkFlowStatus=_this._checkFlowStatus.bind(_this),_this._switchToLauncher=_this._switchToLauncher.bind(_this),_this._switchToPlayer=_this._switchToPlayer.bind(_this),_this._switchToPlayerNow=_this._switchToPlayerNow.bind(_this),_this._loadLauncher=_this._loadLauncher.bind(_this),_this._loadPlayer=_this._loadPlayer.bind(_this),_this._loadPlayerNow=_this._loadPlayerNow.bind(_this),_this.state={playerLaunched:!1,launcherFadeActive:!1,playerFadeActive:!1},_this}return _inherits(Flow,_Component),Flow.prototype.componentDidMount=function(){_Events2.default.subscribe(_Events2.default.player.tracklist_changed,this._onTrackListChanged,"header_flow"),this._checkFlowStatus(),_Events2.default.subscribeOnce(_Events2.default.player.playerLoaded,this._checkFlowStatus,"header_flow")},Flow.prototype.componentWillUnmount=function(){clearTimeout(this._switchTimeout),_Events2.default.unsubscribeAll("header_flow")},Flow.prototype.render=function(){return _react2.default.createElement("article",{className:"channel-flow",role:"region","aria-label":(0,_i18n.gettext)("FLOW")},_react2.default.createElement(_Background2.default,{pictures:this.props.pictures}),this._renderProgressBar(),this._renderContent())},Flow.prototype._renderProgressBar=function(){return this.state.playerLaunched?_ref:null},Flow.prototype._renderContent=function(){var _props=this.props,id=_props.id,type=_props.type,alreadyUsed=_props.alreadyUsed,context=_props.context,_state=this.state,playerLaunched=_state.playerLaunched,launcherFadeActive=_state.launcherFadeActive,playerFadeActive=_state.playerFadeActive;if(!playerLaunched){var launcherClasses=(0,_classnames2.default)({"flow-container flow-launcher":!0,active:launcherFadeActive});return _react2.default.createElement("div",{className:launcherClasses},_react2.default.createElement(_Launcher2.default,this.props))}var playerClasses=(0,_classnames2.default)({"flow-container":!0,active:playerFadeActive});return _react2.default.createElement("div",{className:playerClasses},_react2.default.createElement(_Player2.default,{id:id,type:type,alreadyUsed:alreadyUsed,context:context}))},Flow.prototype._onTrackListChanged=function(e,status){return("undefined"==typeof status||"set"===status.type&&!status.first)&&(this._checkFlowStatus(),!0)},Flow.prototype._checkFlowStatus=function(){var isFlowPlaying=_dzPlayer2.default.helper.isPlayingUserFlow();if(isFlowPlaying){if(this.state.playerLaunched&&this.state.playerFadeActive)return!1;if(!this.state.launcherFadeActive)return this._switchToPlayerNow(),!1;this._switchToPlayer()}else{if(!this.state.playerLaunched&&this.state.launcherFadeActive)return!1;this._switchToLauncher()}},Flow.prototype._switchToLauncher=function(){this.setState({playerFadeActive:!1},function(){this._switchTimeout=setTimeout(function(){this._loadLauncher()}.bind(this),400)})},Flow.prototype._switchToPlayer=function(){this.setState({launcherFadeActive:!1},function(){this._switchTimeout=setTimeout(function(){this._loadPlayer()}.bind(this),600)})},Flow.prototype._switchToPlayerNow=function(){this.setState({launcherFadeActive:!1},function(){this._loadPlayerNow()})},Flow.prototype._loadLauncher=function(){this.setState({launcherFadeActive:!1},function(){this._switchTimeout=setTimeout(function(){this.setState({playerLaunched:!1,launcherFadeActive:!0})}.bind(this),600)})},Flow.prototype._loadPlayer=function(){this.setState({playerFadeActive:!1},function(){this._switchTimeout=setTimeout(function(){this.setState({playerLaunched:!0,playerFadeActive:!0})}.bind(this),600)})},Flow.prototype._loadPlayerNow=function(){var _this2=this;this.setState({playerFadeActive:!1},function(){_this2.setState({playerLaunched:!0,playerFadeActive:!0})})},Flow}(_react.Component);Flow.defaultProps={context:"",alreadyUsed:!0},exports.default=Flow},"./js/Page/components/items/Highlight.js":function(module,exports,__webpack_require__){
"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_Thumbnail=__webpack_require__("./js/_components/Thumbnail/index.js"),_Thumbnail2=_interopRequireDefault(_Thumbnail),_utils=__webpack_require__("./js/_components/Thumbnail/utils.js"),_utils2=_interopRequireDefault(_utils),_Type=__webpack_require__("./js/_modules/Type.js"),_Type2=_interopRequireDefault(_Type),_Events=__webpack_require__("./js/_modules/Events.js"),_Events2=_interopRequireDefault(_Events),HighlightItem=function(_Component){function HighlightItem(){_classCallCheck(this,HighlightItem);var _this=_possibleConstructorReturn(this,_Component.call(this));return _this._togglePlay=_this._togglePlay.bind(_this),_this}return _inherits(HighlightItem,_Component),HighlightItem.prototype.render=function(){var _props=this.props,type=_props.type,pictures=_props.pictures,id=_props.id,data=_props.data,play_button=_props.play_button,redirect_on_play=_props.redirect_on_play,target=_props.target,title=_props.title,subtitle=_props.subtitle,context=_props.context,imgSrc=_utils2.default.getImageSrc(pictures[0].type,pictures[0].md5,1200,500);return _react2.default.createElement("div",{className:"channel-highlight",onClick:this._togglePlay},_react2.default.createElement(_Thumbnail2.default,{id:id,data:data,type:type,multiCover:!0,coverLink:type===_Type2.default.Generic||redirect_on_play,width:1200,height:280,play:play_button?"force":"off",preview:"off",context:context,blur:type===_Type2.default.Generic?0:3,redirectUrl:type===_Type2.default.Generic?target:void 0,imgSrc:imgSrc,isHighlight:!0}),_react2.default.createElement("div",{className:"highlight-container"},_react2.default.createElement("h1",{className:"heading-1 heading-inverse"},target?_react2.default.createElement("a",{className:"evt-click",href:target},title):title),_react2.default.createElement("h2",{className:"heading-2 heading-inverse"},subtitle)))},HighlightItem.prototype._togglePlay=function(){this.props.play_button&&_Events2.default.trigger(_Events2.default.thumbnail.togglePlay)},HighlightItem}(_react.Component);HighlightItem.defaultProps={redirect_on_play:!1,context:""},exports.default=HighlightItem},"./js/Page/components/items/LargeCardLink.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_Link=__webpack_require__("./js/_components/Link.js"),_Link2=_interopRequireDefault(_Link),_i18n=__webpack_require__("./js/_modules/i18n.js"),_Type=__webpack_require__("./js/_modules/Type.js"),_Type2=_interopRequireDefault(_Type),_Slide=__webpack_require__("./js/_components/Slide.js"),_Slide2=_interopRequireDefault(_Slide),LargeCardLinkItem=function(_Component){function LargeCardLinkItem(props){_classCallCheck(this,LargeCardLinkItem);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this._changeTargetForLivestreamToPlay=_this._changeTargetForLivestreamToPlay.bind(_this),_this.state={linkTarget:_this._changeTargetForLivestreamToPlay(props.linkTarget)},_this}return _inherits(LargeCardLinkItem,_Component),LargeCardLinkItem.prototype.componentWillReceiveProps=function(nextProps){this.setState({linkTarget:this._changeTargetForLivestreamToPlay(nextProps.linkTarget)})},LargeCardLinkItem.prototype.render=function(){var _props=this.props,id=_props.id,type=_props.type,context=_props.context,img=_props.img,linkTarget=this.state.linkTarget,btn=!1,layout="light";return type===_Type2.default.VideoLink&&(layout="dark",btn={label:(0,_i18n.gettext)("REGARDER"),icon:!0}),_react2.default.createElement("div",{className:"large-card thumbnail-grid thumbnail-grid-responsive"},_react2.default.createElement("div",{className:"thumbnail-container"},_react2.default.createElement(_Slide2.default,{id:id.toString(),type:type,layout:layout,coverLink:!0,backgroundImage:img,btn:btn,target:linkTarget,context:context})),_react2.default.createElement("div",{className:"large-card-infos thumbnail-col-slide thumbnail-col"},this._renderInfos()))},LargeCardLinkItem.prototype._renderInfos=function(){return _react2.default.createElement("div",{className:"large-card-link-inner-infos"},this._renderLabel(),this._renderTitle(),this._renderSubtitle(),this._renderLink())},LargeCardLinkItem.prototype._renderLabel=function(){var label=this.props.label;return label?_react2.default.createElement("p",{className:"heading-label"},label):null},LargeCardLinkItem.prototype._renderTitle=function(){var _props2=this.props,title=_props2.title,type=_props2.type,linkTarget=this.state.linkTarget;return linkTarget&&type!==_Type2.default.VideoLink?_react2.default.createElement("h3",{className:"heading-4 ellipsis"},_react2.default.createElement(_Link2.default,{className:"heading-4-link",to:linkTarget,target:this._isExternalLinkTarget()?"_blank":null},title)):_react2.default.createElement("h3",{className:"heading-4 ellipsis"},title)},LargeCardLinkItem.prototype._renderSubtitle=function(){var subtitle=this.props.subtitle;return subtitle?_react2.default.createElement("p",{className:"heading-5"},subtitle):null},LargeCardLinkItem.prototype._renderLink=function(){var _props3=this.props,linkContent=_props3.linkContent,type=_props3.type,linkTarget=this.state.linkTarget;return linkContent&&linkTarget&&type!==_Type2.default.VideoLink?_react2.default.createElement("h4",null,_react2.default.createElement(_Link2.default,{className:"view-more link-animated",to:linkTarget,target:this._isExternalLinkTarget()?"_blank":null},linkContent)):null},LargeCardLinkItem.prototype._isExternalLinkTarget=function(){return!!this.state.linkTarget.includes("http")},LargeCardLinkItem.prototype._changeTargetForLivestreamToPlay=function(){var target=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.linkTarget;return!target.includes("http")&&target.includes("/livestream/")?target+"/true":target},LargeCardLinkItem}(_react.Component);LargeCardLinkItem.contextTypes={router:_react.PropTypes.object},LargeCardLinkItem.defaultProps={context:{},label:null,subtitle:null,linkTarget:null,linkContent:(0,_i18n.gettext)("VOIR TOUT")},exports.default=LargeCardLinkItem},"./js/Page/components/items/LargeCardTrackList.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_Link=__webpack_require__("./js/_components/Link.js"),_Link2=_interopRequireDefault(_Link),_dzPlayer=__webpack_require__("./js/_modules/dzPlayer.js"),_dzPlayer2=_interopRequireDefault(_dzPlayer),_utils=__webpack_require__("./js/_modules/utils.js"),_i18n=__webpack_require__("./js/_modules/i18n.js"),_Type=__webpack_require__("./js/_modules/Type.js"),_Type2=_interopRequireDefault(_Type),_api=__webpack_require__("./js/_modules/api.js"),_api2=_interopRequireDefault(_api),_Thumbnail=__webpack_require__("./js/_components/Thumbnail/index.js"),_Thumbnail2=_interopRequireDefault(_Thumbnail),_CrossFader=__webpack_require__("./js/Page/components/items/CrossFader.js"),_CrossFader2=_interopRequireDefault(_CrossFader),LargeCardTrackList=function(_Component){function LargeCardTrackList(props){_classCallCheck(this,LargeCardTrackList);var _this=_possibleConstructorReturn(this,_Component.call(this,props)),trackList=props.trackList;return _this._renderTrackList=_this._renderTrackList.bind(_this),_this._renderForeground=_this._renderForeground.bind(_this),_this._getParams=_this._getParams.bind(_this),_this._maxTracks=5,_this.state={trackList:trackList,isLoaded:trackList.length>0},_this}return _inherits(LargeCardTrackList,_Component),LargeCardTrackList.prototype.componentDidMount=function(){var type=this.props.type;this.state.isLoaded||type!==_Type2.default.Playlist&&type!==_Type2.default.Album&&type!==_Type2.default.Show||this._getTrackList()},LargeCardTrackList.prototype.componentWillUnmount=function(){_api2.default.cancel(this._getTrackListApiRef)},LargeCardTrackList.prototype.render=function(){return _react2.default.createElement("article",{className:"large-card thumbnail-grid thumbnail-grid-responsive"},_react2.default.createElement("div",{className:"thumbnail-container"},_react2.default.createElement("div",{className:"thumbnail-col-slide thumbnail-col"},this._renderBackground(),this._renderForeground(),this._renderInfos())),_react2.default.createElement("div",{className:"large-card-infos thumbnail-col-slide thumbnail-col"},this._renderTrackList(),this._renderViewMore()))},LargeCardTrackList.prototype._renderBackground=function(){var _props=this.props,data=_props.data,type=_props.type,item=_props.item,id=_props.id,context=_props.context,imgAttributes={className:"thumbnail",width:400,blur:8,play:"force",showOptions:!0,coverLink:!0,redirectUrl:item.target,context:context,trackList:this.state.trackList,id:id,type:type,data:data};return _react2.default.createElement("div",{className:"thumbnail-background"},_react2.default.createElement(_Thumbnail2.default,imgAttributes))},LargeCardTrackList.prototype._renderForeground=function(){var item=this.props.item;return _react2.default.createElement("div",{className:"thumbnail-foreground"},_react2.default.createElement(_Link2.default,{to:item.target},_react2.default.createElement(_CrossFader2.default,{pictures:item.pictures,coverLink:!0})))},LargeCardTrackList.prototype._renderInfos=function(){var _props2=this.props,type=_props2.type,item=_props2.item;return type===_Type2.default.App?null:type===_Type2.default.Show&&item.title&&item.title.length>14?_react2.default.createElement("div",{className:"thumbnail-infos"},_react2.default.createElement("div",{className:"heading-4"},_react2.default.createElement(_Link2.default,{to:item.target},item.title))):_react2.default.createElement("div",{className:"thumbnail-infos"},_react2.default.createElement("div",{className:"heading-4 ellipsis"},_react2.default.createElement(_Link2.default,{to:item.target},item.title)),this._renderInfosCreator(),this._renderInfosSubtitle())},LargeCardTrackList.prototype._renderInfosCreator=function(){var _props3=this.props,type=_props3.type,data=_props3.data;switch(type){case _Type2.default.Playlist:return _react2.default.createElement("aside",{role:"complementary",className:"heading-4-sub ellipsis"},(0,_i18n.gettext)("par")," ",_react2.default.createElement(_Link2.default,{to:"/profile/"+data.PARENT_USER_ID},data.PARENT_USERNAME));case _Type2.default.Album:return _react2.default.createElement("aside",{role:"complementary",className:"heading-4-sub ellipsis"},(0,_i18n.gettext)("par")," ",_react2.default.createElement(_Link2.default,{to:"/artist/"+data.ART_ID},data.ART_NAME));case _Type2.default.Show:return _react2.default.createElement("aside",{role:"complementary",className:"heading-4-sub ellipsis"},data.SHOW_DESCRIPTION);default:return null}},LargeCardTrackList.prototype._renderInfosSubtitle=function(){var _props4=this.props,type=_props4.type,item=_props4.item;return type===_Type2.default.Album?null:_react2.default.createElement("div",{className:"heading-4-sub ellipsis"},item.subtitle)},LargeCardTrackList.prototype._renderCaption=function(){var item=this.props.item;return item.caption&&"undefined"!=typeof item.caption&&""!==item.caption?_react2.default.createElement("div",{className:"large-card-caption"},_react2.default.createElement("p",{className:"heading-5"},item.caption)):null},LargeCardTrackList.prototype._renderTrackList=function(){var _this2=this,_state=this.state,trackList=_state.trackList,isLoaded=_state.isLoaded,type=this.props.type;return isLoaded?type===_Type2.default.Show?_react2.default.createElement("ul",{className:"tracklist",key:"large-card-tracklist"},trackList.map(function(episode,index){return _react2.default.createElement("li",{className:"track",key:"episode_"+episode.EPISODE_ID},_react2.default.createElement("span",{className:"track-number"},(0,_utils.pad)(index+1,2)),_react2.default.createElement("span",{className:"heading-5 ellipsis"},_react2.default.createElement("a",{onClick:_this2._play.bind(_this2,index)},episode.EPISODE_TITLE)))})):_react2.default.createElement("ul",{className:"tracklist"},trackList.map(function(song,index){return _react2.default.createElement("li",{className:"track",key:"track_"+song.SNG_ID},_react2.default.createElement("span",{className:"track-number"},(0,_utils.pad)(index+1,2)),_react2.default.createElement("span",{className:"heading-5 ellipsis"},_react2.default.createElement("a",{onClick:_this2._play.bind(_this2,index)},song.SNG_TITLE),_this2.props.type===_Type2.default.Playlist?_react2.default.createElement("span",{className:"heading-5-sub"},(0,_i18n.gettext)("par")," ",_react2.default.createElement(_Link2.default,{to:"/artist/"+song.ART_ID},song.ART_NAME)):null))})):null},LargeCardTrackList.prototype._renderViewMore=function(){return _react2.default.createElement(_Link2.default,{to:this.props.item.target},_react2.default.createElement("div",{className:"view-more link-animated"},(0,_i18n.gettext)("VOIR TOUT")))},LargeCardTrackList.prototype._getTrackList=function(){var _this3=this,params=this._getParams();params&&(this._getTrackListApiRef=_api2.default.call({method:params.method,data:params.data,success:function(result){_this3.setState({trackList:result.data,isLoaded:!0})}}))},LargeCardTrackList.prototype._getParams=function(){var _props5=this.props,id=_props5.id,type=_props5.type;switch(type){case _Type2.default.Album:return{method:"song.getListByAlbum",data:{alb_id:Number(id),nb:this._maxTracks}};case _Type2.default.Playlist:return{method:"playlist.getSongs",data:{playlist_id:Number(id),nb:this._maxTracks}};case _Type2.default.Show:return{method:"episode_getListByShow",data:{show_id:Number(id),nb:this._maxTracks}};default:return null}},LargeCardTrackList.prototype._play=function(index){var _props6=this.props,id=_props6.id,type=_props6.type,item=_props6.item,context=_props6.context;_dzPlayer2.default.play({id:id,type:type,index:index,context:context}),this.context.router.push(item.target)},LargeCardTrackList}(_react.Component);LargeCardTrackList.contextTypes={router:_react.PropTypes.object},LargeCardTrackList.defaultProps={context:"",trackList:[]},exports.default=LargeCardTrackList},"./js/Page/components/items/List.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_navigate=__webpack_require__("./js/Page/modules/navigate.js"),_navigate2=_interopRequireDefault(_navigate),_Thumbnail=__webpack_require__("./js/_components/Thumbnail/index.js"),_Thumbnail2=_interopRequireDefault(_Thumbnail),_utils=__webpack_require__("./js/_components/Thumbnail/utils.js"),_utils2=_interopRequireDefault(_utils),_Badge=__webpack_require__("./js/_components/Badge.js"),_Badge2=_interopRequireDefault(_Badge),ListItem=function(_Component){function ListItem(){return _classCallCheck(this,ListItem),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(ListItem,_Component),ListItem.prototype.render=function(){return _react2.default.createElement("div",{className:"channel-list-item"},this._renderItem())},ListItem.prototype._renderItem=function(){return _react2.default.createElement("div",{className:"nano-card-item has-shadow"},_react2.default.createElement("div",{className:"nano-card-picture"},this._renderThumbnail()),_react2.default.createElement("div",{className:"nano-card-infos"},_react2.default.createElement("p",{className:"heading-3 ellipsis"},_react2.default.createElement(_Badge2.default,{counter:this.props.badge}),_react2.default.createElement("a",{onClick:_navigate2.default.bind(this)},this.props.title)),this._renderSubtitle(),this._renderCaption()))},ListItem.prototype._renderThumbnail=function(){var _props=this.props,pictures=_props.pictures,id=_props.id,type=_props.type,play_button=_props.play_button,context=_props.context;if(pictures instanceof Array==!1||0===pictures.length)return null;var imgSrc=_utils2.default.getImageSrc(pictures[0].type,pictures[0].md5,110,110);return _react2.default.createElement("div",{onClick:_navigate2.default.bind(this)},_react2.default.createElement(_Thumbnail2.default,{id:id,type:type,multiCover:!0,height:110,width:110,context:context,play:play_button?"on":"off",preview:"on",coverLink:!1,imgSrc:imgSrc}))},ListItem.prototype._renderSubtitle=function(){var subtitle=this.props.subtitle;return"string"!=typeof subtitle?null:_react2.default.createElement("p",{className:"heading-2-sub ellipsis"},subtitle)},ListItem.prototype._renderCaption=function(){var caption=this.props.caption;return"string"!=typeof caption?null:_react2.default.createElement("p",{className:"heading-4-sub ellipsis caption"},caption)},ListItem}(_react.Component);ListItem.contextTypes={router:_react.PropTypes.object},ListItem.defaultProps={play_button:!1,weight:1,tags:[],context:""},exports.default=ListItem},"./js/Page/components/layouts/DeeplinkList.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_classnames2=__webpack_require__("./node_modules/classnames/index.js"),_classnames3=_interopRequireDefault(_classnames2),_Type=__webpack_require__("./js/_modules/Type.js"),_Type2=_interopRequireDefault(_Type),_standardize=__webpack_require__("./js/Page/modules/standardize.js"),_standardize2=_interopRequireDefault(_standardize),_live=__webpack_require__("./js/_modules/live/live.js"),_live2=_interopRequireDefault(_live),_DeeplinkList=__webpack_require__("./js/Page/components/items/DeeplinkList.js"),_DeeplinkList2=_interopRequireDefault(_DeeplinkList),DeeplinkListLayout=function(_Component){function DeeplinkListLayout(){return _classCallCheck(this,DeeplinkListLayout),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(DeeplinkListLayout,_Component),DeeplinkListLayout.prototype.componentDidMount=function(){this._logDisplay()},DeeplinkListLayout.prototype.render=function(){var _classnames,classes=(0,_classnames3.default)((_classnames={"channel-list channel-deeplink-list":!0},_classnames["channel-list-"+this.props.items.length]=!0,_classnames.clearfix=!0,_classnames));return _react2.default.createElement("div",{className:"container"},_react2.default.createElement("div",{className:classes},this._renderItems()))},DeeplinkListLayout.prototype._renderItems=function(){return this.props.items.map(this._renderItem)},DeeplinkListLayout.prototype._renderItem=function(item,index){if(DeeplinkListLayout.SUPPORTED_TYPES.indexOf(item.type)===-1)throw new Error('Items of type "'+item.type+'" are not handled by the DeeplinkList layout.');return _react2.default.createElement(_DeeplinkList2.default,_extends({key:index},(0,_standardize2.default)(item)))},DeeplinkListLayout.prototype._logDisplay=function(){_live2.default.log.send("navigation",{event:"onDisplay",properties:{section:this.props.section_id}})},DeeplinkListLayout}(_react.Component);DeeplinkListLayout.contextTypes={router:_react.PropTypes.object},DeeplinkListLayout.SUPPORTED_TYPES=[_Type2.default.Generic,_Type2.default.Deeplink],exports.default=DeeplinkListLayout},"./js/Page/components/layouts/Grid.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_live=__webpack_require__("./js/_modules/live/live.js"),_live2=_interopRequireDefault(_live),_navigate=__webpack_require__("./js/Page/modules/navigate.js"),_navigate2=_interopRequireDefault(_navigate),_ThumbnailGrid=__webpack_require__("./js/_components/ThumbnailGrid/index.js"),_ThumbnailGrid2=_interopRequireDefault(_ThumbnailGrid),GridLayout=function(_Component){function GridLayout(){return _classCallCheck(this,GridLayout),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(GridLayout,_Component),GridLayout.prototype.componentDidMount=function(){this._logDisplay()},GridLayout.prototype.render=function(){var _props=this.props,items=_props.items,data=_props.data,type=_props.type,options=_props.options,layout=this.context.layout;if(0===items.length)return null;var nbLines=!1;"grid-preview-one"===layout?nbLines=1:"grid-preview-two"===layout&&(nbLines=2);var attributes={forceType:"channel"===type&&"channel",data:data,items:items,options:options,nbLines:nbLines};return _react2.default.createElement("div",{className:"container"},_react2.default.createElement(_ThumbnailGrid2.default,attributes),this._renderRelatedTarget())},GridLayout.prototype._renderRelatedTarget=function(){var related=this.props.related;return"object"===("undefined"==typeof related?"undefined":_typeof(related))&&related.target&&related.label?_react2.default.createElement("div",{className:"channel-related-target"},_react2.default.createElement("button",_extends({className:"btn btn-block btn-view-more",type:"button"},this._targetEvents()),_react2.default.createElement("span",{className:"label ellipsis"},related.label))):null},GridLayout.prototype._targetEvents=function(){var events={};return"object"===_typeof(this.props.related)&&this.props.related.target&&(events.onClick=_navigate2.default.bind(this)),events},GridLayout.prototype._logDisplay=function(){_live2.default.log.send("navigation",{event:"onDisplay",properties:{section:this.props.section_id}})},GridLayout}(_react.Component);GridLayout.contextTypes={router:_react.PropTypes.object,layout:_react.PropTypes.string},GridLayout.defaultProps={type:""},exports.default=GridLayout},"./js/Page/components/layouts/Highlight.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_Type=__webpack_require__("./js/_modules/Type.js"),_Type2=_interopRequireDefault(_Type),_standardize=__webpack_require__("./js/Page/modules/standardize.js"),_standardize2=_interopRequireDefault(_standardize),_live=__webpack_require__("./js/_modules/live/live.js"),_live2=_interopRequireDefault(_live),_Highlight=__webpack_require__("./js/Page/components/items/Highlight.js"),_Highlight2=_interopRequireDefault(_Highlight),_Flow=__webpack_require__("./js/Page/components/items/Flow/index.js"),_Flow2=_interopRequireDefault(_Flow),HighlightLayout=function(_Component){function HighlightLayout(props){_classCallCheck(this,HighlightLayout);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this._renderItem=_this._renderItem.bind(_this),_this}return _inherits(HighlightLayout,_Component),HighlightLayout.prototype.componentDidMount=function(){this._logDisplay()},HighlightLayout.prototype.render=function(){return _react2.default.createElement("div",{className:"container"},this._renderItems())},HighlightLayout.prototype._renderItems=function(){return this.props.items.map(this._renderItem)},HighlightLayout.prototype._renderItem=function(item,index){if(HighlightLayout.SUPPORTED_TYPES.indexOf(item.type)===-1)throw new Error('Items of type "'+item.type+'" are not handled by the Highlight layout.');
return item.type===_Type2.default.User?_react2.default.createElement(_Flow2.default,_extends({key:index,alreadyUsed:item.already_used,context:item.data?item.data.context:""},(0,_standardize2.default)(item))):_react2.default.createElement(_Highlight2.default,_extends({key:index,context:item.data?item.data.context:""},(0,_standardize2.default)(item)))},HighlightLayout.prototype._logDisplay=function(){_live2.default.log.send("navigation",{event:"onDisplay",properties:{section:this.props.section_id}})},HighlightLayout}(_react.Component);HighlightLayout.contextTypes={router:_react.PropTypes.object},HighlightLayout.SUPPORTED_TYPES=[_Type2.default.Generic,_Type2.default.Album,_Type2.default.Artist,_Type2.default.Playlist,_Type2.default.Radio,_Type2.default.Show,_Type2.default.Track,_Type2.default.User,_Type2.default.Livestream],exports.default=HighlightLayout},"./js/Page/components/layouts/HorizontalGrid.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__("./node_modules/react-dom/index.js"),_reactDom2=_interopRequireDefault(_reactDom),_Link=__webpack_require__("./js/_components/Link.js"),_Link2=_interopRequireDefault(_Link),_lodash=__webpack_require__("./node_modules/lodash.debounce/index.js"),_lodash2=_interopRequireDefault(_lodash),_classnames=__webpack_require__("./node_modules/classnames/index.js"),_classnames2=_interopRequireDefault(_classnames),_i18n=__webpack_require__("./js/_modules/i18n.js"),_live=__webpack_require__("./js/_modules/live/live.js"),_live2=_interopRequireDefault(_live),_Events=__webpack_require__("./js/_modules/Events.js"),_Events2=_interopRequireDefault(_Events),_config=__webpack_require__("./js/_modules/config/index.js"),_config2=_interopRequireDefault(_config),_ThumbnailGrid=__webpack_require__("./js/_components/ThumbnailGrid/index.js"),_ThumbnailGrid2=_interopRequireDefault(_ThumbnailGrid),_Icon=__webpack_require__("./js/_components/Icon/index.js"),_Icon2=_interopRequireDefault(_Icon),_ref=_react2.default.createElement(_Icon2.default,{name:"chevron-left",size:"16"}),_ref2=_react2.default.createElement(_Icon2.default,{name:"chevron-right",size:"16"}),HorizontalGridLayout=function(_Component){function HorizontalGridLayout(props){_classCallCheck(this,HorizontalGridLayout);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this._initAds=_this._initAds.bind(_this),_this._checkItems=_this._checkItems.bind(_this),_this.state={itemIndex:0,itemWidth:0,containerWidth:0,displayedItemCount:0,hasControlLeft:!1,hasControlRight:!0},_this}return _inherits(HorizontalGridLayout,_Component),HorizontalGridLayout.prototype.getChildContext=function(){return{type:this.props.type,layout:"horizontal-grid"}},HorizontalGridLayout.prototype.componentDidMount=function(){this._checkItems(),this._logDisplay(),_Events2.default.subscribe(_Events2.default.layout.adsBackground,this._initAds),_Events2.default.subscribe(_Events2.default.layout.resize,this._checkItems)},HorizontalGridLayout.prototype.componentWillUnmount=function(){clearTimeout(this._timeoutRef),this._debounceRef&&this._debounceRef.cancel(),_Events2.default.unsubscribe(_Events2.default.layout.adsBackground,this._initAds),_Events2.default.unsubscribe(_Events2.default.layout.resize,this._checkItems)},HorizontalGridLayout.prototype.render=function(){var _state=this.state,itemIndex=_state.itemIndex,itemWidth=_state.itemWidth,related=this.props.related,translateX=itemIndex*("rtl"===_config2.default.get("DIRECTION")?1:-1)*itemWidth,style={transform:"translateX("+translateX+"px)",msTransform:"translateX("+translateX+"px)",WebkitTransform:"translateX("+translateX+"px)"},viewMore={};return"object"===("undefined"==typeof related?"undefined":_typeof(related))&&related.target&&related.label&&(viewMore.label=related.label,viewMore.target=related.target),_react2.default.createElement("div",{className:"channel-horizontalgrid"},_react2.default.createElement("div",{className:"container"},this._renderHeadings()),_react2.default.createElement("div",{className:"container"},_react2.default.createElement("div",{className:"channel-horizontalgrid-wrapper"},_react2.default.createElement("div",{className:"channel-horizontalgrid-inner",style:style},_react2.default.createElement(_ThumbnailGrid2.default,_extends({},this.props,{nbLines:1,viewMore:viewMore}))))))},HorizontalGridLayout.prototype._renderHeadings=function(){var _props=this.props,title=_props.title,related=_props.related,target=_props.target,alignment=_props.alignment;if("undefined"==typeof title)return null;var toTarget="undefined"!=typeof related?related.target:target,headingClasses=(0,_classnames2.default)({"channel-headings":!0,"is-centered":"center"===alignment});return _react2.default.createElement("div",{className:headingClasses},_react2.default.createElement("h2",{className:"heading-2"},"undefined"!=typeof toTarget?_react2.default.createElement(_Link2.default,{className:"link-animated",to:toTarget},title):title),this._renderSubTitle(),this._renderControls())},HorizontalGridLayout.prototype._renderSubTitle=function(){var subtitle=this.props.subtitle;return"undefined"==typeof subtitle?null:_react2.default.createElement("h3",{className:"heading-2-sub"},subtitle)},HorizontalGridLayout.prototype._renderControls=function(){var _state2=this.state,hasControlLeft=_state2.hasControlLeft,hasControlRight=_state2.hasControlRight,controlLeft=(0,_classnames2.default)({"channel-horizontalgrid-control":!0,"channel-horizontalgrid-prev":!0,disabled:!hasControlLeft,hidden:!hasControlLeft&&!hasControlRight}),controlRight=(0,_classnames2.default)({"channel-horizontalgrid-control":!0,"channel-horizontalgrid-next":!0,disabled:!hasControlRight,hidden:!hasControlLeft&&!hasControlRight});return _react2.default.createElement("div",{className:"channel-horizontalgrid-controls"},_react2.default.createElement("button",{className:controlLeft,onClick:this._onSlide.bind(this,"left",hasControlLeft),type:"button"},_ref,_react2.default.createElement("span",{className:"sr-only"},(0,_i18n.gettext)("Précédent"))),_react2.default.createElement("button",{className:controlRight,onClick:this._onSlide.bind(this,"right",hasControlRight),type:"button"},_ref2,_react2.default.createElement("span",{className:"sr-only"},(0,_i18n.gettext)("Suivant"))))},HorizontalGridLayout.prototype._onSlide=function(side,active){if(active){var _state3=this.state,itemIndex=_state3.itemIndex,displayedItemCount=_state3.displayedItemCount,newIndex=itemIndex+("left"===side?-1:1)*displayedItemCount;newIndex!==itemIndex&&this._processNewState(newIndex)}},HorizontalGridLayout.prototype._logDisplay=function(){_live2.default.log.send("navigation",{event:"onDisplay",properties:{section:this.props.section_id}})},HorizontalGridLayout.prototype._measureContainerWidth=function(){var node=_reactDom2.default.findDOMNode(this),containerWidth=node.querySelector(".channel-horizontalgrid-inner").getBoundingClientRect().width;return containerWidth},HorizontalGridLayout.prototype._checkItems=function(){var _this2=this,node=_reactDom2.default.findDOMNode(this),elements=node.querySelectorAll(".thumbnail-col");this._debounceRef=(0,_lodash2.default)(function(){var containerWidth=_this2._measureContainerWidth(),itemWidth=elements[0].offsetWidth+parseInt(window.getComputedStyle(elements[0]).marginLeft,0),displayedItemCount=Math.min(elements.length,Math.ceil(containerWidth/itemWidth));_this2.setState({containerWidth:containerWidth,displayedItemCount:displayedItemCount,itemWidth:itemWidth}),_this2._processNewState(_this2.state.itemIndex)},300),this._debounceRef()},HorizontalGridLayout.prototype._processNewState=function(index){var node=_reactDom2.default.findDOMNode(this),elements=node.querySelectorAll(".thumbnail-col"),displayedItemCount=this.state.displayedItemCount;index=Math.min(elements.length-displayedItemCount,Math.max(0,index)),this.setState({itemIndex:index,hasControlLeft:0!==index,hasControlRight:index+displayedItemCount<elements.length})},HorizontalGridLayout.prototype._initAds=function(e,params){this._checkItems()},HorizontalGridLayout}(_react.Component);HorizontalGridLayout.contextTypes={router:_react.PropTypes.object},HorizontalGridLayout.childContextTypes={type:_react.PropTypes.string,layout:_react.PropTypes.string},HorizontalGridLayout.defaultProps={alignment:"center"},HorizontalGridLayout.SUPPORTED_TYPES=_ThumbnailGrid2.default.SUPPORTED_TYPES,exports.default=HorizontalGridLayout},"./js/Page/components/layouts/ItemHighlight.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_gatekeeper=__webpack_require__("./js/_modules/gatekeeper.js"),_gatekeeper2=_interopRequireDefault(_gatekeeper),_Type=__webpack_require__("./js/_modules/Type.js"),_Type2=_interopRequireDefault(_Type),_Thumbnail=__webpack_require__("./js/_components/Thumbnail/index.js"),_Thumbnail2=_interopRequireDefault(_Thumbnail),_utils=__webpack_require__("./js/_components/Thumbnail/utils.js"),_utils2=_interopRequireDefault(_utils),ItemHighlight=function(_Component){function ItemHighlight(){return _classCallCheck(this,ItemHighlight),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(ItemHighlight,_Component),ItemHighlight.prototype.render=function(){var imgSrc=_utils2.default.getImageSrc("misc",this.props.data[0].RADIO_PICTURE,"64","64");return _react2.default.createElement("div",{className:"container channel-item-highlight"},_react2.default.createElement("div",{className:"item-picture"},_react2.default.createElement(_Thumbnail2.default,{imgSrc:imgSrc,height:64,width:64,play:"force",coverLink:_gatekeeper2.default.isAllowed("mix_page"),data:this.props.data[0],type:"radio",context:this.props.data[0].context})),_react2.default.createElement("div",{className:"item-infos"},_react2.default.createElement("div",{className:"heading-4 ellipsis"},this.props.items[0].title),_react2.default.createElement("div",{className:"heading-4-sub ellipsis"},this.props.items[0].caption)))},ItemHighlight}(_react.Component);ItemHighlight.defaultProps={context:""},ItemHighlight.SUPPORTED_TYPES=[_Type2.default.Radio],exports.default=ItemHighlight},"./js/Page/components/layouts/LargeCard.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_Type=__webpack_require__("./js/_modules/Type.js"),_Type2=_interopRequireDefault(_Type),_LargeCardTrackList=__webpack_require__("./js/Page/components/items/LargeCardTrackList.js"),_LargeCardTrackList2=_interopRequireDefault(_LargeCardTrackList),_LargeCardLink=__webpack_require__("./js/Page/components/items/LargeCardLink.js"),_LargeCardLink2=_interopRequireDefault(_LargeCardLink),LargeCard=function(_Component){function LargeCard(props){_classCallCheck(this,LargeCard);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this._renderItem=_this._renderItem.bind(_this),_this._renderItems=_this._renderItems.bind(_this),_this}return _inherits(LargeCard,_Component),LargeCard.prototype.render=function(){var items=this.props.items;return this._renderItems(items)},LargeCard.prototype._renderItems=function(items){var _this2=this,itemsRender=items.map(function(item,i){return _this2._renderItem(item,i)});return _react2.default.createElement("div",{className:"container"},itemsRender)},LargeCard.prototype._renderItem=function(item,index){if(item.type&&LargeCard.SUPPORTED_TYPES.indexOf(item.type)===-1)throw new Error('Items of type "'+item.type+'" are not handled by the LargeCard layout.');return!item.type||item.type!==_Type2.default.Playlist&&item.type!==_Type2.default.Album&&item.type!==_Type2.default.Show?this._renderLargeCardLink(item,index):this._renderLargeCardTrackList(item,index)},LargeCard.prototype._renderLargeCardLink=function(item,index){return _react2.default.createElement(_LargeCardLink2.default,{key:item.id,id:item.id,type:item.type,context:this.props.data[index].context,img:item.pictures&&item.pictures[0],label:item.label,title:item.title,subtitle:item.subtitle,linkTarget:item.target,linkContent:item.target_title?item.target_title:void 0})},LargeCard.prototype._renderLargeCardTrackList=function(item,index){return _react2.default.createElement(_LargeCardTrackList2.default,{key:item.id,id:Number(item.id),item:item,data:item.data,type:item.type,context:this.props.data[index].context})},LargeCard}(_react.Component);LargeCard.SUPPORTED_TYPES=[_Type2.default.Album,_Type2.default.Playlist,_Type2.default.App,_Type2.default.ExternalLink,_Type2.default.Show,_Type2.default.VideoLink],exports.default=LargeCard},"./js/Page/components/layouts/List.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_classnames2=__webpack_require__("./node_modules/classnames/index.js"),_classnames3=_interopRequireDefault(_classnames2),_Events=__webpack_require__("./js/_modules/Events.js"),_Events2=_interopRequireDefault(_Events),_Type=__webpack_require__("./js/_modules/Type.js"),_Type2=_interopRequireDefault(_Type),_standardize=__webpack_require__("./js/Page/modules/standardize.js"),_standardize2=_interopRequireDefault(_standardize),_live=__webpack_require__("./js/_modules/live/live.js"),_live2=_interopRequireDefault(_live),_List=__webpack_require__("./js/Page/components/items/List.js"),_List2=_interopRequireDefault(_List),ListLayout=function(_Component){function ListLayout(props){_classCallCheck(this,ListLayout);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this._checkItemsLimit=_this._checkItemsLimit.bind(_this),_this._renderItem=_this._renderItem.bind(_this),_this.state={itemsLimitPerLine:_this._getItemsLimitPerLine()},_this}return _inherits(ListLayout,_Component),ListLayout.prototype.componentWillMount=function(){_Events2.default.subscribeOnce(_Events2.default.layout.adsBackground,this._checkItemsLimit),_Events2.default.subscribe(_Events2.default.layout.resize,this._checkItemsLimit)},ListLayout.prototype.componentDidMount=function(){this._logDisplay(),this._checkItemsLimit()},ListLayout.prototype.componentWillUnmount=function(){_Events2.default.unsubscribe(_Events2.default.layout.resize,this._checkItemsLimit)},ListLayout.prototype.render=function(){var _classnames,itemsLimitPerLine=this.state.itemsLimitPerLine,fullLines=this.props.fullLines,classes=(0,_classnames3.default)((_classnames={"channel-list":!0,"channel-list-tops":!0},_classnames["channel-list-"+itemsLimitPerLine]=!0,_classnames.clearfix=!0,_classnames)),items=this.props.items;if(fullLines){var nbItems=items.length<=ListLayout.LOW_ITEMS_LIMIT_PER_LINE?items.length:items.length-items.length%itemsLimitPerLine;items=items.slice(0,nbItems)}return _react2.default.createElement("div",{ref:"pageRecos",className:"container"},_react2.default.createElement("div",{className:classes},this._renderItems(items)))},ListLayout.prototype._renderItems=function(items){return items.map(this._renderItem)},ListLayout.prototype._renderItem=function(item,index){if(ListLayout.SUPPORTED_TYPES.indexOf(item.type)===-1)throw new Error('Items of type "'+item.type+'" are not handled by the List layout.');return _react2.default.createElement(_List2.default,_extends({key:index,context:item.context},(0,_standardize2.default)(item)))},ListLayout.prototype._checkItemsLimit=function(){var itemsLimitPerLine=this._getItemsLimitPerLine();itemsLimitPerLine!==this.state.itemsLimitPerLine&&this.setState({itemsLimitPerLine:itemsLimitPerLine})},ListLayout.prototype._getItemsLimitPerLine=function(){if(this.refs&&this.refs.pageRecos)return this.refs.pageRecos.clientWidth<=1025?ListLayout.LOW_ITEMS_LIMIT_PER_LINE:ListLayout.HIGH_ITEMS_LIMIT_PER_LINE;var matchMedia=window.matchMedia||function(media){var styleMedia=window.styleMedia||window.media;return{matches:!styleMedia||styleMedia.matchMedium(media||"all"),media:media||"all"}};return matchMedia("(max-width: 1340px)").matches?ListLayout.LOW_ITEMS_LIMIT_PER_LINE:ListLayout.HIGH_ITEMS_LIMIT_PER_LINE},ListLayout.prototype._logDisplay=function(){_live2.default.log.send("navigation",{event:"onDisplay",properties:{section:this.props.section_id}})},ListLayout}(_react.Component);ListLayout.contextTypes={router:_react.PropTypes.object},ListLayout.defaultProps={fullLines:!1},ListLayout.SUPPORTED_TYPES=[_Type2.default.Generic,_Type2.default.Album,_Type2.default.App,_Type2.default.Artist,_Type2.default.Playlist,_Type2.default.Radio,_Type2.default.Show,_Type2.default.Track,_Type2.default.User],ListLayout.LOW_ITEMS_LIMIT_PER_LINE=2,ListLayout.HIGH_ITEMS_LIMIT_PER_LINE=3,exports.default=ListLayout},"./js/Page/components/layouts/NativeAds.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_Events=__webpack_require__("./js/_modules/Events.js"),_Events2=_interopRequireDefault(_Events),_api=__webpack_require__("./js/_modules/api.js"),_api2=_interopRequireDefault(_api),_i18n=__webpack_require__("./js/_modules/i18n.js"),_utils=__webpack_require__("./js/_modules/utils.js"),_error2=__webpack_require__("./js/_modules/error.js"),_error3=_interopRequireDefault(_error2),_config=__webpack_require__("./js/_modules/config/index.js"),_config2=_interopRequireDefault(_config),_gatekeeper=__webpack_require__("./js/_modules/gatekeeper.js"),_gatekeeper2=_interopRequireDefault(_gatekeeper),_GenericBanner=__webpack_require__("./js/Page/components/banner/GenericBanner.js"),_GenericBanner2=_interopRequireDefault(_GenericBanner),_ProductBanner=__webpack_require__("./js/Page/components/banner/ProductBanner.js"),_ProductBanner2=_interopRequireDefault(_ProductBanner),_ref=_react2.default.createElement("div",{className:"channel-ads-banner loading"},_react2.default.createElement("div",{className:"channel-ads-media"}),_react2.default.createElement("div",{className:"channel-ads-content"},_react2.default.createElement("div",{className:"loading-bar-1"}),_react2.default.createElement("div",{className:"loading-bar-2"}))),NativeAds=function(_Component){function NativeAds(props){_classCallCheck(this,NativeAds);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this._onAdCallback=_this._onAdCallback.bind(_this),_this._refresh=_this._refresh.bind(_this),_this.state={banner:_this._renderLoading()},_this}return _inherits(NativeAds,_Component),NativeAds.prototype.componentDidMount=function(){_Events2.default.ready(_Events2.default.ads.buildNativeAd,this._onAdCallback)},NativeAds.prototype.componentWillUnmount=function(){_api2.default.cancel(this._apiCallRef),_Events2.default.unresolve(_Events2.default.ads.buildNativeAd),_Events2.default.unsubscribe(_Events2.default.ads.refreshAds,this._refresh)},NativeAds.prototype.render=function(){return _react2.default.createElement("div",{className:"container",id:"nativeAds"},this.state.banner)},NativeAds.prototype._renderLoading=function(){return _ref},NativeAds.prototype._renderProductBanner=function(results,bannerConfig,componentType,componentTypeId,params){if("undefined"==typeof results||"undefined"==typeof bannerConfig)return null;var context="adsTracking"+(0,_utils.ucfirst)(componentType);this.setState({banner:_react2.default.createElement(_ProductBanner2.default,{adConfig:bannerConfig,apiData:results,type:componentType,id:Number(componentTypeId),params:params,context:context})})},NativeAds.prototype._onAdCallback=function(data){if(null===data)return null;_Events2.default.unresolve(_Events2.default.ads.buildNativeAd),_Events2.default.subscribe(_Events2.default.ads.refreshAds,this._refresh),_Events2.default.resolve(_Events2.default.ads.showAdsSection);var adType=(0,_i18n.gettext)("PUBLICITÉ");"undefined"!=typeof data.advertising_type&&"sponsored"===data.advertising_type.toLowerCase()&&(adType=(0,_i18n.gettext)("SPONSORISÉ")),data.advertising_type=adType,this._checkAdsData(data),data.description=decodeURI(data.description),data.title=decodeURI(data.title),data.hashtagOption=decodeURI(data.hashtagOption),data.claimOption=decodeURI(data.claimOption);var urlConfig=void 0;return("generic"===data.type&&"1"===data.isDeeplink||"product"===data.type)&&(urlConfig=this._getConfigFromUrl(data.urlTarget)),data.pixelAgenceScript&&this._callPixelAgenceScript(data.pixelAgenceScript),"generic"===data.type?(this.setState({banner:_react2.default.createElement(_GenericBanner2.default,_extends({adConfig:data},urlConfig))}),!0):void this._callApiForProductBanner(data,urlConfig.type,urlConfig.id,urlConfig.params)},NativeAds.prototype._getConfigFromUrl=function(url){var limiter=".com";if(url.lastIndexOf(limiter)>-1){var deeplink=url.slice(url.lastIndexOf(limiter)+limiter.length+1,url.length),adsConfig=deeplink.split("/"),id=adsConfig[1];return id.indexOf("?")>-1?(id=id.split("?"),{type:adsConfig[0],id:id[0],params:id[1]}):{type:adsConfig[0],id:id}}},NativeAds.prototype._callApiForProductBanner=function(bannerConfig,type,id,params){var _this2=this,method=type+".getData",data=void 0;switch(type){case"playlist":data={PLAYLIST_ID:id};break;case"album":data={ALB_ID:id};break;case"artist":data={ART_ID:id};break;case"track":case"song":method="song.getData",data={SNG_ID:id};break;case"radio":data={RADIO_ID:id};break;case"show":data={SHOW_ID:id};break;default:return!1}this._apiCallRef=_api2.default.call({method:method,data:data,success:function(results){_this2._renderProductBanner(results,bannerConfig,type,id,params)},error:function(){_Events2.default.trigger(_Events2.default.ads.hideAdsSection),_error3.default.log(new Error('ADS - NativeAds api.call error: undefined url"'+bannerConfig.urlTarget+'"'))}})},NativeAds.prototype._callPixelAgenceScript=function(data){var tempdiv=document.createElement("div"),scriptContent=decodeURIComponent(data);scriptContent=scriptContent.replace(/(\r\n|\n|\r)/gm,""),tempdiv.innerHTML=decodeURIComponent(data);for(var nativeAdsDiv=document.getElementById("nativeAds"),_iterator=tempdiv.childNodes,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref2;if(_isArray){if(_i>=_iterator.length)break;_ref2=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref2=_i.value}var child=_ref2;if("SCRIPT"===child.tagName){var pixelScript=document.createElement("script");pixelScript.id="adsScript",pixelScript.text=child.text,document.head.appendChild(pixelScript)}"IMG"===child.tagName&&null!==nativeAdsDiv&&nativeAdsDiv.appendChild(child)}},NativeAds.prototype._checkAdsData=function(data){"1"===data.isDeeplink&&""===data.urlTarget&&_gatekeeper2.default.isAllowed("sentry")&&"PROD"===_config2.default.get("ENV")&&Raven.captureMessage("ADS - NativeAds: missing deeplink ",{level:"warning"})},NativeAds.prototype._refresh=function(){_Events2.default.ready(_Events2.default.ads.buildNativeAd,this._onAdCallback),_Events2.default.unsubscribe(_Events2.default.ads.refreshAd,this._refresh),this.setState({banner:this._renderLoading()})},NativeAds}(_react.Component);exports.default=NativeAds},"./js/Page/index.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function PageEntryPoint(props,context){var pageProps={type:props.location.pathname.replace(/^\/[a-z]{2}\//,"/").replace(/^\/(page\/)?/,"")||"home",sections:context.appState&&context.appState.sections||[],masthead:context.appState&&context.appState.masthead||null};return pageProps.title=/(channels\/)?home/.test(pageProps.type)?null:context.appState&&context.appState.title,_react2.default.createElement(_Page2.default,pageProps)}exports.__esModule=!0,exports.default=PageEntryPoint;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_Page=__webpack_require__("./js/Page/components/Page.js"),_Page2=_interopRequireDefault(_Page);PageEntryPoint.contextTypes={appState:_react.PropTypes.object}},"./js/Page/modules/navigate.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_live=__webpack_require__("./js/_modules/live/live.js"),_live2=_interopRequireDefault(_live),_config=__webpack_require__("./js/_modules/config/index.js"),_config2=_interopRequireDefault(_config),navigate=function(){_live2.default.log.send("navigation",{event:"onClick",properties:{id:this.props.item_id,type:this.props.type}});var location;if("object"===_typeof(this.props.related)&&this.props.related.target&&(location=this.props.related.target),location||"string"!=typeof this.props.target||(location=this.props.target),location)return/^\//.test(location)?void this.context.router.push("/"+_config2.default.get("SETTING_LANG")+location):void(document.location="/"+_config2.default.get("SETTING_LANG")+location)};exports.default=navigate},"./js/Page/modules/standardize.js":function(module,exports,__webpack_require__){
"use strict";exports.__esModule=!0;var standardize=function(item){item=Object.assign({},item);var keys={generic:"id",album:"ALB_ID",app:"APP_ID",artist:"ART_ID",playlist:"PLAYLIST_ID",radio:"RADIO_ID",show:"SHOW_ID",track:"SNG_ID",user:"USER_ID",livestream:"LIVESTREAM_ID"};return keys[item.type]&&(item.id=Number(item.data[keys[item.type]])),item};exports.default=standardize},"./js/_components/Slide.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("./node_modules/classnames/index.js"),_classnames2=_interopRequireDefault(_classnames),_dzPlayer=__webpack_require__("./js/_modules/dzPlayer.js"),_dzPlayer2=_interopRequireDefault(_dzPlayer),_www=__webpack_require__("./js/_modules/www.js"),_utils=__webpack_require__("./js/_components/Thumbnail/utils.js"),_utils2=_interopRequireDefault(_utils),_Type=__webpack_require__("./js/_modules/Type.js"),_Type2=_interopRequireDefault(_Type),_i18n=__webpack_require__("./js/_modules/i18n.js"),_modal=__webpack_require__("./js/_modules/modal.js"),_modal2=_interopRequireDefault(_modal),_Icon=__webpack_require__("./js/_components/Icon/index.js"),_Icon2=_interopRequireDefault(_Icon),_PlayIcon=__webpack_require__("./js/_components/Thumbnail/PlayIcon.js"),_PlayIcon2=_interopRequireDefault(_PlayIcon),MAX_SLIDE_WIDTH=600,MAX_IMG_SIZE=278,LAYOUT={LIGHT:"light",DARK:"dark"},_ref=_react2.default.createElement(_Icon2.default,{name:"play",size:"8"}),Slide=function(_Component){function Slide(props){_classCallCheck(this,Slide);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this._urlIframe=null,_this._onClickBtn=_this._onClickBtn.bind(_this),_this._onClickCover=_this._onClickCover.bind(_this),_this._onMouseOver=_this._onMouseOver.bind(_this),_this._onMouseOut=_this._onMouseOut.bind(_this),_this._isExternalLinkTarget=_this._isExternalLinkTarget.bind(_this),_this._urlIframe=props.type===_Type2.default.VideoLink?_this._getUrl(props.target):null,_this.state={isBtnHover:!1},_this}return _inherits(Slide,_Component),Slide.prototype.shouldComponentUpdate=function(nextProps,nextState,nextContext){return this.props.id!==nextProps.id||this.state.isBtnHover!==nextState.isBtnHover||this.context.isDisabled!==nextContext.isDisabled},Slide.prototype.render=function(){var _props=this.props,layout=_props.layout,className=_props.className,coverLink=_props.coverLink,backgroundImage=_props.backgroundImage,style=(0,_classnames2.default)(className,"thumbnail-col","slide",{"is-link":coverLink,"is-bg-full-img":backgroundImage&&backgroundImage.md5&&backgroundImage.type,"is-btn-hover":this.state.isBtnHover,"layout-dark":layout===LAYOUT.DARK});return _react2.default.createElement("figure",{className:style},this._renderBackground(),this._renderForeground())},Slide.prototype._renderBackground=function(){var _props2=this.props,backgroundImage=_props2.backgroundImage,backgroundColor=_props2.backgroundColor,title=_props2.title,coverLink=_props2.coverLink,styleBackgroundColor={backgroundColor:backgroundColor||""};if(backgroundImage&&backgroundImage.md5&&backgroundImage.type){var backgroundImageSrc=this._getImgSrc(backgroundImage,0,MAX_SLIDE_WIDTH);return _react2.default.createElement("div",{className:"slide-background",style:styleBackgroundColor,onClick:coverLink?this._onClickCover:null},_react2.default.createElement("img",{className:"slide-background-img",src:backgroundImageSrc,alt:title||""}))}return _react2.default.createElement("div",{className:"slide-background",style:styleBackgroundColor})},Slide.prototype._renderForeground=function(){var _props3=this.props,coverLink=_props3.coverLink,title=_props3.title,subtitle=_props3.subtitle,btn=_props3.btn,img=_props3.img;return title||subtitle||img||btn?_react2.default.createElement("div",{className:"slide-foreground",onClick:coverLink?this._onClickCover:null},this._renderImg(),this._renderText()):null},Slide.prototype._renderText=function(){return _react2.default.createElement("div",{className:"slide-text"},this._renderTitle(),this._renderSubtitle(),this._renderBtn())},Slide.prototype._renderImg=function(){var _props4=this.props,img=_props4.img,title=_props4.title,coverLink=_props4.coverLink;if(!img)return null;var imgSrc=this._getImgSrc(img,MAX_IMG_SIZE,MAX_IMG_SIZE);return _react2.default.createElement("img",{className:"slide-img",src:imgSrc,alt:title||"",onClick:coverLink?this._onClickCover:null})},Slide.prototype._renderTitle=function(){var title=this.props.title;return title?_react2.default.createElement("div",{className:"title"},title):null},Slide.prototype._renderSubtitle=function(){var subtitle=this.props.subtitle;return subtitle?_react2.default.createElement("div",{className:"subtitle ellipsis"},subtitle):null},Slide.prototype._renderBtn=function(){var _props5=this.props,target=_props5.target,btn=_props5.btn;return btn&&target?_react2.default.createElement("div",{className:"btn slide-btn",onClick:this._onClickBtn,onMouseEnter:this._onMouseOver,onMouseLeave:this._onMouseOut},this._getBtnIcon(),_react2.default.createElement("span",null,this._getBtnText())):null},Slide.prototype._onClickBtn=function(){var _props6=this.props,type=_props6.type,id=_props6.id,btn=_props6.btn,context=_props6.context;this.context.isDisabled||(btn.directPlay===!0&&this._isAuthorizedTypeForDirectPlay(type)?_dzPlayer2.default.play({type:type,id:Number(id),context:context}):type===_Type2.default.VideoLink?this._openVideo():this._navigate())},Slide.prototype._onClickCover=function(){this.context.isDisabled||(this.props.type===_Type2.default.VideoLink?this._openVideo():this._navigate())},Slide.prototype._onMouseOver=function(){this.setState({isBtnHover:!0})},Slide.prototype._onMouseOut=function(){this.setState({isBtnHover:!1})},Slide.prototype._getImgSrc=function(img,height,width){return _utils2.default.getImageSrc(img.type,img.md5,width,height)},Slide.prototype._getBtnIcon=function(){var _props7=this.props,btn=_props7.btn,id=_props7.id,type=_props7.type,layout=_props7.layout,context=_props7.context;if(!btn||btn.icon!==!0)return null;if(btn.directPlay===!0&&this._isAuthorizedTypeForDirectPlay(type)){var isRadio=type===_Type2.default.Artist||type===_Type2.default.Radio||type===_Type2.default.User||type===_Type2.default.Livestream;return _react2.default.createElement(_PlayIcon2.default,{key:"play",id:parseInt(id,10),type:type,layout:layout===LAYOUT.LIGHT?LAYOUT.DARK:LAYOUT.LIGHT,radio:isRadio,iconStack:!1,preview:"off",context:context})}return _ref},Slide.prototype._getBtnText=function(){var btn=this.props.btn;return btn?btn.label?btn.label:btn.directPlay?(0,_i18n.gettext)("ÉCOUTER"):(0,_i18n.gettext)("DÉCOUVRIR"):null},Slide.prototype._navigate=function(){var _props8=this.props,type=_props8.type,id=_props8.id,target=_props8.target,url=target||_utils2.default.getClickURL(type,id);if(url){var externalLink=this._isExternalLinkTarget(url);this._navTimeoutRef=setTimeout(function(){_www.www.navigate(url,{externalLink:externalLink})},0)}},Slide.prototype._isExternalLinkTarget=function(url){return url.includes("http")},Slide.prototype._isAuthorizedTypeForDirectPlay=function(type){var authorizedTypes=[_Type2.default.Album,_Type2.default.App,_Type2.default.Artist,_Type2.default.Episode,_Type2.default.Generic,_Type2.default.Playlist,_Type2.default.Radio,_Type2.default.Show,_Type2.default.Track,_Type2.default.User,_Type2.default.Livestream];return authorizedTypes.indexOf(type)!==-1},Slide.prototype._openVideo=function(){_dzPlayer2.default.isPlaying()&&_dzPlayer2.default.control.togglePause();var width=560,height=315,modal_url="/lightbox/video?platform=iframe";modal_url+="&width="+width,modal_url+="&height="+height,modal_url+="&url="+this._urlIframe,_modal2.default.open(modal_url)},Slide.prototype._getUrl=function(url){return 0===url.indexOf("/video?url=")&&(url=url.replace("/video?url=","")),url},Slide}(_react.Component);Slide.contextTypes={isDisabled:_react.PropTypes.bool},Slide.defaultProps={coverLink:!0,title:null,subtitle:null,btn:!1,backgroundImage:null,backgroundColor:null,layout:LAYOUT.LIGHT,img:null,className:"thumbnail-col-slide",context:""},exports.default=Slide},"./js/_components/StatesButton/index.js":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defaults(obj,defaults){for(var keys=Object.getOwnPropertyNames(defaults),i=0;i<keys.length;i++){var key=keys[i],value=Object.getOwnPropertyDescriptor(defaults,key);value&&value.configurable&&void 0===obj[key]&&Object.defineProperty(obj,key,value)}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):_defaults(subClass,superClass))}exports.__esModule=!0;var _react=__webpack_require__("./node_modules/react/react.js"),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__("./node_modules/classnames/index.js"),_classnames2=_interopRequireDefault(_classnames),_Events=__webpack_require__("./js/_modules/Events.js"),_Events2=_interopRequireDefault(_Events),_dzPlayer=__webpack_require__("./js/_modules/dzPlayer.js"),_dzPlayer2=_interopRequireDefault(_dzPlayer),_favorite=__webpack_require__("./js/_modules/favorite.js"),_favorite2=_interopRequireDefault(_favorite),_utils=__webpack_require__("./js/_components/DataGrid/utils.js"),_userData=__webpack_require__("./js/_modules/userData.js"),_userData2=_interopRequireDefault(_userData),_utils2=__webpack_require__("./js/_components/StatesButton/utils.js"),_config=__webpack_require__("./js/_modules/config/index.js"),_config2=_interopRequireDefault(_config),_PlayerMetrics=__webpack_require__("./js/_modules/player/PlayerMetrics.js"),_PlayerMetrics2=_interopRequireDefault(_PlayerMetrics),StatesButton=function(_Component){function StatesButton(props,context){_classCallCheck(this,StatesButton);var _this=_possibleConstructorReturn(this,_Component.call(this,props,context));return _this._handleClick=_this._handleClick.bind(_this),_this._onFavoriteStatusChange=_this._onFavoriteStatusChange.bind(_this),_this._onPlayStatusChange=_this._onPlayStatusChange.bind(_this),_this._onPlayClick=_this._onPlayClick.bind(_this),_this._onFavoriteClick=_this._onFavoriteClick.bind(_this),_this.state=_this._getStateFromStore(props),_this}return _inherits(StatesButton,_Component),StatesButton.prototype.componentDidMount=function(){var _this2=this;this._handleEvents("subscribe"),_Events2.default.ready(_Events2.default.user.userReady,function(){_this2.setState(_this2._getStateFromStore(_this2.props))})},StatesButton.prototype.componentWillReceiveProps=function(nextProps){this.setState(this._getStateFromStore(nextProps))},StatesButton.prototype.shouldComponentUpdate=function(nextProps,nextState){return this.props.id!==nextProps.id||this.props.disabled!==nextProps.disabled||this.state.status!==nextState.status||this.state.active!==nextState.active},StatesButton.prototype.componentWillUnmount=function(){this._handleEvents("unsubscribe")},StatesButton.prototype.render=function(){var _props=this.props,color=_props.color,size=_props.size,action=_props.action,disabled=_props.disabled,_state=this.state,active=_state.active,status=_state.status,button_classes={"btn btn-action":!0,"btn-default":"default"===color,"btn-primary":"primary"===color,active:active,paused:!active&&"play"===action&&"resume"===status};return button_classes["btn-"+action]=!0,button_classes["btn-"+size]=size,button_classes=(0,_classnames2.default)(button_classes),_react2.default.createElement("button",{className:button_classes,type:"button",onClick:this._handleClick,disabled:disabled},this._renderContent())},StatesButton.prototype._renderContent=function(){var _state2=this.state,status=_state2.status,active=_state2.active,iconDefault={icon:!0};iconDefault["icon-"+this._getIcon(status)]=!0;var hoverStatus=status;"resume"!==hoverStatus&&(hoverStatus=active?"hover":"default");var iconHover={icon:!0};iconHover["icon-"+this._getIcon(hoverStatus)]=!0;var content=[_react2.default.createElement("div",{key:"default",className:"action action-default"},_react2.default.createElement("span",{key:"icon",className:(0,_classnames2.default)(iconDefault)}),_react2.default.createElement("span",{key:"label",className:"label"},this._getWording("default"))),_react2.default.createElement("div",{key:"active",className:"action action-active"},_react2.default.createElement("span",{key:"icon",className:this._getAnimatedIcon()||(0,_classnames2.default)(iconDefault)}),_react2.default.createElement("span",{key:"label",className:"label","aria-hidden":"true"},this._getWording("active"))),_react2.default.createElement("div",{key:"hover",className:"action action-hover"},_react2.default.createElement("span",{key:"icon",className:(0,_classnames2.default)(iconHover)}),_react2.default.createElement("span",{key:"label",className:"label","aria-hidden":"true"},this._getWording("hover")))];return"play"===this.props.action&&content.push(_react2.default.createElement("div",{key:"resume",className:"action action-resume"},_react2.default.createElement("span",{key:"icon",className:(0,_classnames2.default)(iconDefault)}),_react2.default.createElement("span",{key:"label",className:"label","aria-hidden":"true"},this._getWording("resume")))),content},StatesButton.prototype._onFavoriteStatusChange=function(e,data){var _props2=this.props,type=_props2.type,id=_props2.id;if("undefined"!=typeof data&&type===data.type&&Number(id)===Number(data.id)){var isFavorite=_userData2.default.isFavorite(type,id);this.setState({status:isFavorite?"active":"default",active:isFavorite})}},StatesButton.prototype._onPlayStatusChange=function(e,playing){var active=this.state.active;if(active||playing)return this._hasSameContext()?void this.setState({status:active&&!playing?"resume":"active",active:playing}):void this.setState({status:"default",active:!1})},StatesButton.prototype._onPlayClick=function(){if(this._hasSameContext())return _PlayerMetrics2.default.intent("toggle"),void _dzPlayer2.default.control.togglePause();var _props3=this.props,type=_props3.type,id=_props3.id,items=_props3.items,play_context=_props3.play_context;_PlayerMetrics2.default.intent("play"),_dzPlayer2.default.play({type:type,id:id,data:items,radio:"artist_smartradio"===play_context||"profile_user_radio"===play_context,context:{TYPE:play_context,ID:id}})},StatesButton.prototype._onFavoriteClick=function(){_favorite2.default.action({id:this.props.id,type:this.props.type,context:this.context.name})},StatesButton.prototype._handleEvents=function(action){for(var events_subscription_list=this._getData("events_subscription"),l=events_subscription_list.length,i=0;i<l;i++)_Events2.default[action](events_subscription_list[i].event_name,this[events_subscription_list[i].event_callback])},StatesButton.prototype._handleClick=function(){this.props.disabled||this[this._getData("onclick")]()},StatesButton.prototype._getData=function(type){var action=this.props.action,types={play:{events_subscription:[{event_name:_Events2.default.player.playing,event_callback:"_onPlayStatusChange"}],icon_mapping:{default:"play-circle",active:"play-circle",hover:"pause-circle",resume:"play-circle"},onclick:"_onPlayClick"},favorite:{events_subscription:[{event_name:_Events2.default.user.addFavorite,event_callback:"_onFavoriteStatusChange"},{event_name:_Events2.default.user.deleteFavorite,event_callback:"_onFavoriteStatusChange"}],icon_mapping:{default:"love",active:"love",hover:"cancel",default_user:"follow",active_user:"check",hover_user:"cancel"},onclick:"_onFavoriteClick"}};return types[action]?types[action][type]:null},StatesButton.prototype._hasSameContext=function(){var context=_dzPlayer2.default.getContext();if(null===context)return!1;var logContext=_config2.default.get("LOG_CONTEXT");return logContext[(0,_utils.getContextName)(context.TYPE)]===logContext[this.context.name]&&context.ID===this.context.id},StatesButton.prototype._getIcon=function(status){var type="user"===this.props.type&&"favorite"===this.props.action?"_user":"";return this._getData("icon_mapping")[status+type]},StatesButton.prototype._getAnimatedIcon=function(){return"play"!==this.props.action||"active"!==this.state.status?null:(0,_classnames2.default)({"equalizer equalizer-12":!0,"equalizer-dark":"default"===this.props.color,"equalizer-inverse":"default"!==this.props.color})},StatesButton.prototype._getWording=function(status){return"none"===this.props.wording_type?"":(0,_utils2.getWording)({action:this.props.action,type:this.props.type,wording:this.props.wording_type},status)},StatesButton.prototype._getStateFromStore=function(props){var action=props.action,type=props.type,id=props.id,status="default";return"favorite"===action&&_userData2.default.isFavorite(type,id)&&(status="active"),"play"===action&&this._hasSameContext()&&(status=_dzPlayer2.default.isPaused()?"resume":_dzPlayer2.default.isPlaying()?"active":"default"),{status:status,active:"active"===status}},StatesButton}(_react.Component);StatesButton.contextTypes={id:_react.PropTypes.oneOfType([_react.PropTypes.number,_react.PropTypes.string]),name:_react.PropTypes.string},StatesButton.childContextTypes={id:_react.PropTypes.oneOfType([_react.PropTypes.number,_react.PropTypes.string]),name:_react.PropTypes.string},StatesButton.defaultProps={id:0,type:"",action:"favorite",color:"default",items:[],wording_type:"standard",play_context:"",size:"",disabled:!1},exports.default=StatesButton}});
//# sourceMappingURL=https://files.deezer.com/cache/js/page-index.5c4b51fa83e3059da6c9.js.map.json